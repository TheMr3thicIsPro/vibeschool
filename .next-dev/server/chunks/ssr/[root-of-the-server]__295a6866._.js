module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},39355,a=>{"use strict";let b=(0,a.i(70106).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["default",()=>b])},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},70106,a=>{"use strict";var b=a.i(72131);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],70106)},90925,21230,33759,a=>{"use strict";var b=a.i(87924),c=a.i(56025),d=a.i(50944),e=a.i(72131);let f=({duration:a=3e3,className:b="",showPercentage:c=!0})=>{let[d,f]=(0,e.useState)(0);return(0,e.useEffect)(()=>{let b=setInterval(()=>{f(a=>a>=100?(clearInterval(b),100):a+1)},a/100);return()=>clearInterval(b)},[a]),e.default.createElement("div",{className:"w-full "+b},c&&e.default.createElement("div",{className:"flex justify-between items-center mb-2"},e.default.createElement("span",{className:"text-sm font-medium text-gray-300"},"Loading..."),e.default.createElement("span",{className:"text-sm font-medium text-accent-primary"},d+"%")),e.default.createElement("div",{className:"w-full bg-gray-800 rounded-full h-2.5"},e.default.createElement("div",{className:"bg-gradient-to-r from-accent-primary to-purple-600 h-2.5 rounded-full transition-all duration-100 ease-out",style:{width:d+"%"}})),d>=100&&e.default.createElement("div",{className:"mt-2 text-center text-sm text-green-400 animate-pulse"},"Complete!"))};a.s(["default",0,f],21230);let g=({className:a="",count:c=1,showLoadingBar:d=!1,loadingDuration:e=3e3})=>{let g=Array.from({length:c},(c,d)=>(0,b.jsx)("div",{className:`animate-pulse bg-gray-700 rounded ${a}`},d));return(0,b.jsxs)(b.Fragment,{children:[d&&(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(f,{duration:e})}),g]})};a.s(["default",0,g],33759);let h=({className:a="",loadingText:c="Loading...",showLoadingBar:d=!0,showSkeletons:e=!0,skeletonCount:h=5,duration:i=5e3})=>(0,b.jsxs)("div",{className:`relative ${a}`,children:[d&&(0,b.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 pt-2 px-4",children:(0,b.jsx)(f,{duration:i,showPercentage:!1})}),e&&(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8 text-center",children:[(0,b.jsx)(g,{className:"h-8 w-64 mb-4 mx-auto"}),(0,b.jsx)(g,{className:"h-4 w-48 mx-auto"})]}),(0,b.jsx)("div",{className:"space-y-6",children:Array.from({length:h}).map((a,c)=>(0,b.jsxs)("div",{className:"card p-6 border border-card-border",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)(g,{className:"h-6 w-32"}),(0,b.jsx)(g,{className:"h-4 w-16"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g,{className:"h-4 w-full"}),(0,b.jsx)(g,{className:"h-4 w-5/6"}),(0,b.jsx)(g,{className:"h-4 w-4/6"}),(0,b.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,b.jsx)(g,{className:"h-10 w-24 rounded-lg"}),(0,b.jsx)(g,{className:"h-10 w-24 rounded-lg"})]})]})]},c))})]})]});a.s(["default",0,({children:a})=>{let[f,g]=(0,e.useState)(!1);(0,e.useEffect)(()=>{g(!0)},[]);let{state:i}=(0,c.useAuthStore)(),{user:j,authLoading:k}=i,l=(0,d.useRouter)();return((0,e.useEffect)(()=>{!f||k||j||l.push("/auth/login")},[f,j,k,l]),f)?k?(0,b.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,b.jsx)(h,{loadingText:"Checking authentication status..."})}):j?(0,b.jsx)(b.Fragment,{children:a}):null:(0,b.jsx)(b.Fragment,{children:a})}],90925)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},43108,a=>{"use strict";let b=(0,a.i(70106).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},39189,a=>{"use strict";var b=a.i(10849);let c=async(a,c)=>{let{data:d,error:e}=await b.supabase.from("purchases").insert([{user_id:a,...c,started_at:new Date().toISOString()}]).select().single();if(e)throw e;return d},d=async(a,c)=>{let{data:d,error:e}=await b.supabase.from("purchases").update({...c,updated_at:new Date().toISOString()}).eq("id",a).select().single();if(e)throw e;return d},e=async a=>{let{data:c,error:d}=await b.supabase.from("purchases").select("*").eq("user_id",a).in("status",["active","past_due"]).order("created_at",{ascending:!1}).limit(1);if(d)throw d;return c[0]||null},f=async a=>{let b=await e(a);if(!b)return!1;if("lifetime"===b.product_type)return!0;if("active"===b.status){if(!b.ended_at)return!0;let a=new Date(b.ended_at);return new Date<=a}return!1},g=async a=>{let{data:c,error:d}=await b.supabase.from("purchases").select("*").eq("user_id",a).order("created_at",{ascending:!1});if(d)throw d;return c},h=async a=>{let{data:c,error:d}=await b.supabase.from("purchases").update({status:"canceled",ended_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",a).select().single();if(d)throw d;return c};a.s(["cancelSubscription",0,h,"checkUserAccess",0,f,"createPurchase",0,c,"getUserActivePurchase",0,e,"getUserPurchases",0,g,"updatePurchase",0,d])},11156,a=>{"use strict";let b=(0,a.i(70106).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);a.s(["CreditCard",()=>b],11156)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},35901,a=>{"use strict";var b,c=function(a,b){a&&a._registerWrapper&&a._registerWrapper({name:"stripe-js",version:"5.10.0",startTime:b})},d=null,e=function(a,b,d){if(null===a)return null;var e,f=b[0].match(/^pk_test/),g=3===(e=a.version)?"v3":e;f&&"v3"!==g&&console.warn("Stripe.js@".concat(g," was loaded on the page, but @stripe/stripe-js@").concat("5.10.0"," expected Stripe.js@").concat("v3",". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var h=a.apply(void 0,b);return c(h,d),h},f=!1,g=function(){return b?b:b=(null!==d?d:(d=new Promise(function(a,b){a(null)})).catch(function(a){return d=null,Promise.reject(a)})).catch(function(a){return b=null,Promise.reject(a)})};Promise.resolve().then(function(){return g()}).catch(function(a){f||console.warn(a)});var h=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];f=!0;var d=Date.now();return g().then(function(a){return e(a,b,d)})},i=a.i(39189);let j=null,k=async(a,b,c)=>{try{let d=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a,userEmail:b,planType:c})}),e=await d.json();if(!d.ok)throw Error(e.error||"Failed to create checkout session");return e}catch(a){throw console.error("Error creating checkout session:",a),a}},l=async(a,b)=>{try{let c=await fetch(`/api/stripe/session?session_id=${a}`),d=await c.json();if(!c.ok)throw Error("Failed to retrieve session");let e={product_type:"subscription"===d.planType?"subscription":"trial",stripe_customer_id:d.customer,stripe_subscription_id:d.subscription||null,stripe_price_id:d.priceId,amount_cents:d.amount_total,currency:d.currency,status:"active"};return await (0,i.createPurchase)(b,e),!0}catch(a){throw console.error("Error handling successful payment:",a),a}};a.s(["createCheckoutSession",0,k,"getStripe",0,()=>(j||(j=h("pk_test_51StRiqH8ewbl8NTl5aV6UFbYFKTBPJyXbgXfVbEXkPdwYQQb0Q3YmBQh4Hx4WS9ydHESGg7RMTp7e8Wuay0xOLfA00wN2yCkzR")),j),"handleSuccessfulPayment",0,l],35901)},86991,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(39189),f=a.i(35901),g=a.i(11156),h=a.i(43108),i=a.i(16201),j=a.i(92e3),k=a.i(90925),l=a.i(48441);a.s(["default",0,()=>{let{state:a}=(0,d.useAuthStore)(),m=a.user,[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)("plans");(0,c.useEffect)(()=>{m&&v()},[m]);let v=async()=>{try{if(s(!0),m){let a=await (0,e.checkUserAccess)(m.id);o(a);let b=await (0,e.getUserPurchases)(m.id);q(b)}}catch(a){console.error("Failed to fetch user data:",a)}finally{s(!1)}},w=async a=>{if(m)try{s(!0);let b=await (0,f.createCheckoutSession)(m.id,m.email,"trial"===a?"trial":"subscription"),c=await (0,f.getStripe)();if(!c){console.error("Stripe failed to initialize"),alert("Stripe is not available. Please try again later.");return}let d=await c.redirectToCheckout({sessionId:b.sessionId});d.error&&(console.error("Stripe checkout error:",d.error),alert("Error redirecting to checkout. Please try again."))}catch(a){console.error("Checkout error:",a),alert(`Error: ${a.message||"Failed to initiate checkout"}`)}finally{s(!1)}};return r?(0,b.jsx)(k.default,{children:(0,b.jsx)(l.default,{children:(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsx)("div",{className:"text-2xl font-bold text-accent-primary",children:"Loading payment options..."})})})}):(0,b.jsx)(k.default,{children:(0,b.jsx)(l.default,{children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Access Plans"}),(0,b.jsx)("p",{className:"text-gray-400 mb-8",children:n?"You have active access to premium content":"Unlock premium content with one of our plans"}),n&&(0,b.jsxs)("div",{className:"mb-8 p-4 bg-green-900/20 border border-green-700 rounded-lg flex items-center gap-3",children:[(0,b.jsx)(i.CheckCircle,{className:"text-green-400",size:24}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-green-400",children:"Active Access"}),(0,b.jsx)("p",{className:"text-green-300 text-sm",children:"You currently have access to premium content"})]})]}),(0,b.jsxs)("div",{className:"flex border-b border-gray-700 mb-8",children:[(0,b.jsx)("button",{className:`px-4 py-2 font-medium hover-lift ${"plans"===t?"text-accent-primary border-b-2 border-accent-primary":"text-gray-400 hover:text-white"}`,onClick:()=>u("plans"),children:"Pricing Plans"}),(0,b.jsx)("button",{className:`px-4 py-2 font-medium hover-lift ${"history"===t?"text-accent-primary border-b-2 border-accent-primary":"text-gray-400 hover:text-white"}`,onClick:()=>u("history"),children:"Purchase History"})]}),"plans"===t?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:"trial",name:"Free Trial",price:"$0.00",period:"first 3 days",currency:"AUD",description:"Try before you buy - no credit card required",features:["Access to first 1-2 lessons of each course","Preview premium content","No payment information needed","Easy upgrade anytime"],popular:!0},{id:"subscription",name:"Monthly Subscription",price:"$1.99",period:"first month, then $7.99/month",currency:"AUD",description:"Access to all premium content",features:["Full course library","New modules and lessons","Community access","Priority support","Cancel anytime"]}].map(a=>(0,b.jsxs)("div",{className:`card p-6 border rounded-lg relative ${a.popular?"border-accent-primary ring-2 ring-accent-primary/30":"border-card-border"}`,children:[a.popular&&(0,b.jsx)("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-accent-primary text-white text-xs font-bold px-4 py-1 rounded-full border border-accent-primary",children:"MOST POPULAR"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:a.name}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("span",{className:"text-3xl font-bold text-white",children:a.price}),(0,b.jsxs)("span",{className:"text-gray-400",children:[" ",a.period]})]}),(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:a.currency})]}),(0,b.jsx)("p",{className:"text-gray-400 mb-6",children:a.description}),(0,b.jsx)("ul",{className:"space-y-3 mb-6",children:a.features.map((a,c)=>(0,b.jsxs)("li",{className:"flex items-center gap-2 text-gray-300",children:[(0,b.jsx)(i.CheckCircle,{className:"text-accent-primary",size:16}),(0,b.jsx)("span",{children:a})]},c))}),(0,b.jsx)("button",{onClick:()=>w(a.id),disabled:n&&"trial"===a.id,className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${n&&"trial"===a.id?"bg-gray-700 text-gray-400 cursor-not-allowed":"trial"===a.id?"bg-green-600 text-white hover:bg-green-700 hover-lift":"bg-accent-primary text-white hover:bg-accent-primary/90 hover-lift"}`,children:n&&"trial"===a.id?"Trial Completed":"trial"===a.id?"Start Free Trial":"Subscribe Now"})]},a.id))}):(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Purchase History"}),0===p.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(g.CreditCard,{className:"mx-auto text-gray-600 mb-4",size:48}),(0,b.jsx)("p",{className:"text-gray-400",children:"No purchase history yet"})]}):(0,b.jsx)("div",{className:"space-y-4",children:p.map(a=>(0,b.jsxs)("div",{className:"card p-4 border border-card-border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium text-white",children:"lifetime"===a.product_type?"Lifetime Access":"subscription"===a.product_type?"Monthly Subscription":"Free Trial"}),(0,b.jsxs)("p",{className:"text-gray-400 text-sm",children:[new Date(a.created_at).toLocaleDateString()," â€¢ ",a.currency," ",a.amount_cents/100]})]}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs ${"active"===a.status?"bg-green-900/30 text-green-400":"canceled"===a.status?"bg-red-900/30 text-red-400":"bg-yellow-900/30 text-yellow-400"}`,children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})]}),a.ended_at&&(0,b.jsxs)("p",{className:"text-gray-500 text-xs mt-2",children:["Ends: ",new Date(a.ended_at).toLocaleDateString()]})]},a.id))})]}),(0,b.jsxs)("div",{className:"mt-12 p-6 bg-card-bg border border-card-border rounded-lg",children:[(0,b.jsxs)("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[(0,b.jsx)(h.Lock,{className:"text-accent-primary",size:20}),"Access Information"]}),(0,b.jsxs)("ul",{className:"space-y-2 text-gray-300 text-sm",children:[(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(j.AlertCircle,{size:16,className:"text-gray-500 mt-0.5"}),(0,b.jsx)("span",{children:"3-day free trial with no credit card required"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(j.AlertCircle,{size:16,className:"text-gray-500 mt-0.5"}),(0,b.jsx)("span",{children:"$1.99 for first month, then $7.99/month thereafter"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(j.AlertCircle,{size:16,className:"text-gray-500 mt-0.5"}),(0,b.jsx)("span",{children:"Full access unlocks after trial or subscription"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(j.AlertCircle,{size:16,className:"text-gray-500 mt-0.5"}),(0,b.jsx)("span",{children:"No refunds are available after purchase"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(j.AlertCircle,{size:16,className:"text-gray-500 mt-0.5"}),(0,b.jsx)("span",{children:"Cancel anytime during your subscription"})]})]})]})]})})})})}])},63258,a=>{a.v(a=>Promise.resolve().then(()=>a(39189)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__295a6866._.js.map