module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},39355,a=>{"use strict";let b=(0,a.i(70106).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["default",()=>b])},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},70106,a=>{"use strict";var b=a.i(72131);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],70106)},90925,21230,33759,a=>{"use strict";var b=a.i(87924),c=a.i(56025),d=a.i(50944),e=a.i(72131);let f=({duration:a=3e3,className:b="",showPercentage:c=!0})=>{let[d,f]=(0,e.useState)(0);return(0,e.useEffect)(()=>{let b=setInterval(()=>{f(a=>a>=100?(clearInterval(b),100):a+1)},a/100);return()=>clearInterval(b)},[a]),e.default.createElement("div",{className:"w-full "+b},c&&e.default.createElement("div",{className:"flex justify-between items-center mb-2"},e.default.createElement("span",{className:"text-sm font-medium text-gray-300"},"Loading..."),e.default.createElement("span",{className:"text-sm font-medium text-accent-primary"},d+"%")),e.default.createElement("div",{className:"w-full bg-gray-800 rounded-full h-2.5"},e.default.createElement("div",{className:"bg-gradient-to-r from-accent-primary to-purple-600 h-2.5 rounded-full transition-all duration-100 ease-out",style:{width:d+"%"}})),d>=100&&e.default.createElement("div",{className:"mt-2 text-center text-sm text-green-400 animate-pulse"},"Complete!"))};a.s(["default",0,f],21230);let g=({className:a="",count:c=1,showLoadingBar:d=!1,loadingDuration:e=3e3})=>{let g=Array.from({length:c},(c,d)=>(0,b.jsx)("div",{className:`animate-pulse bg-gray-700 rounded ${a}`},d));return(0,b.jsxs)(b.Fragment,{children:[d&&(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(f,{duration:e})}),g]})};a.s(["default",0,g],33759);let h=({className:a="",loadingText:c="Loading...",showLoadingBar:d=!0,showSkeletons:e=!0,skeletonCount:h=5,duration:i=5e3})=>(0,b.jsxs)("div",{className:`relative ${a}`,children:[d&&(0,b.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 pt-2 px-4",children:(0,b.jsx)(f,{duration:i,showPercentage:!1})}),e&&(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8 text-center",children:[(0,b.jsx)(g,{className:"h-8 w-64 mb-4 mx-auto"}),(0,b.jsx)(g,{className:"h-4 w-48 mx-auto"})]}),(0,b.jsx)("div",{className:"space-y-6",children:Array.from({length:h}).map((a,c)=>(0,b.jsxs)("div",{className:"card p-6 border border-card-border",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)(g,{className:"h-6 w-32"}),(0,b.jsx)(g,{className:"h-4 w-16"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g,{className:"h-4 w-full"}),(0,b.jsx)(g,{className:"h-4 w-5/6"}),(0,b.jsx)(g,{className:"h-4 w-4/6"}),(0,b.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,b.jsx)(g,{className:"h-10 w-24 rounded-lg"}),(0,b.jsx)(g,{className:"h-10 w-24 rounded-lg"})]})]})]},c))})]})]});a.s(["default",0,({children:a})=>{let[f,g]=(0,e.useState)(!1);(0,e.useEffect)(()=>{g(!0)},[]);let{state:i}=(0,c.useAuthStore)(),{user:j,authLoading:k}=i,l=(0,d.useRouter)();return((0,e.useEffect)(()=>{!f||k||j||l.push("/auth/login")},[f,j,k,l]),f)?k?(0,b.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,b.jsx)(h,{loadingText:"Checking authentication status..."})}):j?(0,b.jsx)(b.Fragment,{children:a}):null:(0,b.jsx)(b.Fragment,{children:a})}],90925)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},62722,a=>{"use strict";let b=(0,a.i(70106).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],62722)},73320,a=>{"use strict";let b=(0,a.i(70106).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);a.s(["Upload",()=>b],73320)},37565,a=>{"use strict";let b=(0,a.i(70106).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["default",()=>b])},60246,a=>{"use strict";var b=a.i(37565);a.s(["Users",()=>b.default])},41675,a=>{"use strict";let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},26297,83077,a=>{"use strict";var b,c,d,e,f=a.i(10849),g=((b={}).UPCOMING="upcoming",b.ACTIVE="active",b.ENDED="ended",b.CLOSED="closed",b);(c={}).FREE="free",c.PAID="paid",(d={}).PENDING="pending",d.PAID="paid",d.REFUNDED="refunded",d.FAILED="failed",(e={}).SUBMITTED="submitted",e.UNDER_REVIEW="under_review",e.APPROVED="approved",e.REJECTED="rejected";let h=["text/html","text/css","text/javascript","application/javascript","application/json","application/zip","application/x-zip-compressed","image/png","image/jpeg","image/gif","image/webp"],i=async(a,b,c)=>{try{console.log("uploadFile: Uploading file to bucket:",a,"path:",b);let d=c.size>0x3200000?{isValid:!1,error:"File size exceeds 50MB limit"}:h.includes(c.type)?{isValid:!0}:{isValid:!1,error:`File type ${c.type} is not allowed. Allowed types: ${h.join(", ")}`};if(!d.isValid)throw Error(d.error);let{data:e,error:g}=await f.supabase.storage.from(a).upload(b,c,{cacheControl:"3600",upsert:!1});if(g)throw console.error("uploadFile: Error uploading file:",g),g;let{data:i}=f.supabase.storage.from(a).getPublicUrl(b),j={url:i.publicUrl,path:b,fileName:c.name,fileSize:c.size,mimeType:c.type};return console.log("uploadFile: Successfully uploaded file:",j.url),j}catch(a){throw console.error("uploadFile: Unexpected error:",a),a}},j=async(a,b)=>{try{console.log("deleteFile: Deleting file from bucket:",a,"path:",b);let{error:c}=await f.supabase.storage.from(a).remove([b]);if(c)throw console.error("deleteFile: Error deleting file:",c),c;console.log("deleteFile: Successfully deleted file")}catch(a){throw console.error("deleteFile: Unexpected error:",a),a}};function k(a){let b=new Date,c=new Date(a.start_date),d=new Date(a.end_date);return b<c?g.UPCOMING:b>d?g.ENDED:g.ACTIVE}function l(a){let b=a.challenge_participants?.length||0,c=k(a);return{...a,participant_count:b,status:c,participants:a.challenge_participants?.map(a=>({...a,user:a.profiles}))||[]}}let m=async(a={})=>{try{console.log("challengeService.getChallenges: fetching with filters",a);let b=f.supabase.from("challenges").select(`
        *,
        challenge_participants(
          *,
          profiles(username, full_name)
        )
      `).eq("is_published",!0);a.type&&"all"!==a.type&&(b=b.eq("type",a.type)),a.search&&(b=b.or(`title.ilike.%${a.search}%,description.ilike.%${a.search}%`));let{data:c,error:d}=await b.order("created_at",{ascending:!1});if(d)throw console.error("challengeService.getChallenges: error fetching challenges",d),d;let e=(c||[]).map(l);a.status&&"all"!==a.status&&(e=e.filter(b=>b.status===a.status));let g=a.sortBy||"created_at",h=a.sortOrder||"desc";return e.sort((a,b)=>{let c=a[g],d=b[g];return("participant_count"===g&&(c=a.participant_count||0,d=b.participant_count||0),"start_date"===g&&(c=new Date(a.start_date).getTime(),d=new Date(b.start_date).getTime()),c<d)?"asc"===h?-1:1:c>d?"asc"===h?1:-1:0}),console.log("challengeService.getChallenges: returning",e.length,"challenges"),e}catch(a){throw console.error("challengeService.getChallenges: unexpected error",a),a}},n=async a=>{try{console.log("challengeService.getUserChallenges: fetching for user",a);let{data:b,error:c}=await f.supabase.from("challenges").select(`
        *,
        challenge_participants!inner(
          *,
          profiles(username, full_name)
        )
      `).eq("challenge_participants.user_id",a).order("created_at",{ascending:!1});if(c)throw console.error("challengeService.getUserChallenges: error fetching",c),c;let d=(b||[]).map(b=>{let c=l(b);return c.user_participation=(b.challenge_participants||[]).find(b=>b.user_id===a)||null,c});return console.log("challengeService.getUserChallenges: returning",d.length,"challenges"),d}catch(a){throw console.error("challengeService.getUserChallenges: unexpected error",a),a}},o=async(a,b)=>{try{console.log("challengeService.getChallengeById: fetching challenge",a,"for user",b);let{data:c,error:d}=await f.supabase.from("challenges").select(`
        *,
        challenge_participants(
          *,
          profiles(username, full_name)
        ),
        submissions(
          *,
          profiles(username, full_name),
          reviewers:reviewed_by(username, full_name)
        )
      `).eq("id",a).single();if(d){if("PGRST116"===d.code)return null;throw console.error("challengeService.getChallengeById: error fetching",d),d}let e=l(c),g=(c.submissions||[]).map(a=>({...a,user:a.profiles,reviewer:a.reviewers})),h={...e,submissions:g,user_participation:b&&(c.challenge_participants||[]).find(a=>a.user_id===b)||null};return console.log("challengeService.getChallengeById: returning challenge",h.id),h}catch(a){throw console.error("challengeService.getChallengeById: unexpected error",a),a}},p=async(a,b)=>{try{console.log("challengeService.joinChallenge: user",b,"joining challenge",a.challenge_id);let{data:c}=await f.supabase.from("profiles").select("id, basics_completed").eq("id",b).single();if(!c?.basics_completed)throw Error("You must complete the Basics Module before joining challenges");let{data:d,error:e}=await f.supabase.from("challenges").select("*").eq("id",a.challenge_id).single();if(e||!d)throw console.error("challengeService.joinChallenge: challenge not found",e),Error("Challenge not found");if(k(d)===g.ENDED)throw Error("You cannot join an ended challenge");let h=new Date(d.submission_deadline);if(new Date>h)throw Error("You cannot join after the submission deadline");let{data:i}=await f.supabase.from("challenge_participants").select("id").eq("challenge_id",a.challenge_id).eq("user_id",b).maybeSingle();if(i?.id)throw Error("You have already joined this challenge");let j="paid"===d.type?"pending":"paid",{data:l,error:m}=await f.supabase.from("challenge_participants").insert([{challenge_id:a.challenge_id,user_id:b,payment_status:j,joined_at:new Date().toISOString()}]).select(`
        *,
        profiles(username, full_name)
      `).single();if(m)throw console.error("challengeService.joinChallenge: error joining",m),m;let n={...l,user:l.profiles};return console.log("challengeService.joinChallenge: joined successfully",n.id),n}catch(a){throw console.error("challengeService.joinChallenge: unexpected error",a),a}},q=async(a,b)=>{try{console.log("challengeService.submitToChallenge: user",b,"submitting to",a.challenge_id);let{data:c}=await f.supabase.from("challenge_participants").select("id").eq("challenge_id",a.challenge_id).eq("user_id",b).maybeSingle();if(!c?.id)throw Error("You must join the challenge before submitting");let{data:d}=await f.supabase.from("challenges").select("submission_deadline").eq("id",a.challenge_id).single(),e=new Date(d.submission_deadline);if(new Date>e)throw Error("Submission deadline has passed");let{data:g}=await f.supabase.from("submissions").select("*").eq("challenge_id",a.challenge_id).eq("user_id",b).maybeSingle(),h=g?.file_url,k=g?.file_name,l=g?.file_size,m=g?.mime_type;if(a.file){let c=a.file.name.replace(/\s+/g,"_"),d=`${b}/${a.challenge_id}/${Date.now()}-${c}`,e=await i("challenge-submissions",d,a.file);if(h=e.url,k=e.fileName,l=e.fileSize,m=e.mimeType,g?.file_url)try{let c=g.file_url.split("/").pop();if(c){let d=`${b}/${a.challenge_id}/${c}`;await j("challenge-submissions",d)}}catch(a){console.warn("challengeService.submitToChallenge: failed to delete old file",a)}}if(g?.id){let{data:b,error:c}=await f.supabase.from("submissions").update({file_url:h,file_name:k,file_size:l,mime_type:m,submission_notes:a.submission_notes,status:"submitted",updated_at:new Date().toISOString()}).eq("id",g.id).select(`
          *,
          profiles(username, full_name),
          reviewers:reviewed_by(username, full_name)
        `).single();if(c)throw console.error("challengeService.submitToChallenge: error updating submission",c),c;let d={...b,user:b.profiles,reviewer:b.reviewers};return console.log("challengeService.submitToChallenge: updated submission",d.id),d}{if(!a.file)throw Error("Please attach a file to submit");let{data:c,error:d}=await f.supabase.from("submissions").insert([{challenge_id:a.challenge_id,user_id:b,file_url:h,file_name:k,file_size:l,mime_type:m,submission_notes:a.submission_notes,status:"submitted",is_winner:!1,submitted_at:new Date().toISOString()}]).select(`
          *,
          profiles(username, full_name),
          reviewers:reviewed_by(username, full_name)
        `).single();if(d)throw console.error("challengeService.submitToChallenge: error creating submission",d),d;let e={...c,user:c.profiles,reviewer:c.reviewers};return console.log("challengeService.submitToChallenge: created submission",e.id),e}}catch(a){throw console.error("challengeService.submitToChallenge: unexpected error",a),a}};a.s(["getChallengeById",0,o,"getChallenges",0,m,"getUserChallenges",0,n,"joinChallenge",0,p,"submitToChallenge",0,q],26297);let r=(0,a.i(70106).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);a.s(["Trophy",()=>r],83077)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ba5a0503._.js.map