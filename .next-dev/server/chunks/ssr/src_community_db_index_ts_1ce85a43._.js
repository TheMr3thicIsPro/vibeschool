module.exports=[86299,a=>{"use strict";class b{storageKey="vibeschool-community-data";DEBUG_COMMUNITY="true"===process.env.DEBUG_COMMUNITY;constructor(){this.initStorage()}initStorage(){}getData(){return{profiles:[],friendRequests:[],friends:[],conversations:[],conversationMembers:[],messages:[],blocks:[],reports:[],typingIndicators:{}}}setData(a){}async getProfile(a){let b=this.getData().profiles.find(b=>b.id===a)||null;return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] getProfile",{userId:a,profile:b?"found":"not found"}),b}async updateProfile(a,b){let c=this.getData(),d=c.profiles.findIndex(b=>b.id===a);if(-1!==d)c.profiles[d]={...c.profiles[d],...b,last_seen_at:new Date().toISOString()};else{let d={id:a,username:b.username||"",display_name:b.display_name||"",avatar_url:b.avatar_url,role:b.role||"student",created_at:new Date().toISOString(),last_seen_at:new Date().toISOString(),is_online:!1};c.profiles.push(d)}return this.setData(c),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] updateProfile",{userId:a,data:b}),c.profiles.find(b=>b.id===a)}async searchProfiles(a){let b=this.getData(),c=a.toLowerCase(),d=b.profiles.filter(a=>a.username.toLowerCase().includes(c)||a.display_name.toLowerCase().includes(c));return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] searchProfiles",{query:a,results:d.length}),d}async createFriendRequest(a,b){let c=this.getData(),d={id:crypto.randomUUID(),requester_id:a,addressee_id:b,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return c.friendRequests.push(d),this.setData(c),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] createFriendRequest",{requesterId:a,addresseeId:b,requestId:d.id}),d}async updateFriendRequest(a,b){let c=this.getData(),d=c.friendRequests.findIndex(b=>b.id===a);if(-1!==d){if(c.friendRequests[d].status=b,c.friendRequests[d].updated_at=new Date().toISOString(),"accepted"===b){let a=c.friendRequests[d],b={user_id:a.requester_id,friend_id:a.addressee_id,created_at:new Date().toISOString()},e={user_id:a.addressee_id,friend_id:a.requester_id,created_at:new Date().toISOString()};c.friends.push(b,e)}return this.setData(c),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] updateFriendRequest",{requestId:a,status:b}),c.friendRequests[d]}throw Error("Friend request not found")}async getFriendRequests(a){let b=this.getData().friendRequests.filter(b=>b.addressee_id===a||b.requester_id===a);return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] getFriendRequests",{userId:a,count:b.length}),b}async getFriends(a){let b=this.getData().friends.filter(b=>b.user_id===a);return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] getFriends",{userId:a,count:b.length}),b}async unfriend(a,b){let c=this.getData();c.friends=c.friends.filter(c=>c.user_id!==a||c.friend_id!==b||c.user_id!==b||c.friend_id!==a),this.setData(c),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] unfriend",{userId:a,friendId:b})}async createConversation(a,b,c,d){let e=this.getData(),f={id:crypto.randomUUID(),is_group:a,title:c||(a?"Group Chat":void 0),created_by:b,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};e.conversations.push(f);let g={conversation_id:f.id,user_id:b,role:"owner",joined_at:new Date().toISOString()};if(e.conversationMembers.push(g),d){for(let a of d)if(a!==b){let b={conversation_id:f.id,user_id:a,role:"member",joined_at:new Date().toISOString()};e.conversationMembers.push(b)}}return this.setData(e),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] createConversation",{isGroup:a,createdBy:b,title:c,userIds:d,conversationId:f.id}),f}async getConversations(a){let b=this.getData(),c=b.conversationMembers.filter(b=>b.user_id===a).map(a=>a.conversation_id),d=b.conversations.filter(a=>c.includes(a.id));return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] getConversations",{userId:a,count:d.length}),d}async getConversation(a){let b=this.getData().conversations.find(b=>b.id===a)||null;return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] getConversation",{conversationId:a,found:!!b}),b}async addConversationMember(a,b,c="member"){let d=this.getData();if(!d.conversationMembers.find(c=>c.conversation_id===a&&c.user_id===b)){let e={conversation_id:a,user_id:b,role:c,joined_at:new Date().toISOString()};d.conversationMembers.push(e),this.setData(d),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] addConversationMember",{conversationId:a,userId:b,role:c})}}async removeConversationMember(a,b){let c=this.getData();c.conversationMembers=c.conversationMembers.filter(c=>c.conversation_id!==a||c.user_id!==b),this.setData(c),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] removeConversationMember",{conversationId:a,userId:b})}async updateConversation(a,b){let c=this.getData(),d=c.conversations.findIndex(b=>b.id===a);-1!==d&&(c.conversations[d]={...c.conversations[d],...b,updated_at:new Date().toISOString()},this.setData(c),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] updateConversation",{conversationId:a,data:b}))}async createMessage(a){let b=this.getData(),c={...a,id:crypto.randomUUID(),created_at:new Date().toISOString()};return b.messages.push(c),this.setData(b),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] createMessage",{conversationId:a.conversation_id,senderId:a.sender_id,messageId:c.id}),c}async getMessages(a,b=0,c=50){let d=this.getData().messages.filter(b=>b.conversation_id===a&&!b.deleted_at).sort((a,b)=>new Date(a.created_at).getTime()-new Date(b.created_at).getTime()).slice(b,b+c);return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] getMessages",{conversationId:a,offset:b,limit:c,count:d.length}),d}async updateMessage(a,b){let c=this.getData(),d=c.messages.findIndex(b=>b.id===a);if(-1!==d)return c.messages[d].body=b,c.messages[d].edited_at=new Date().toISOString(),this.setData(c),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] updateMessage",{messageId:a,body:b}),c.messages[d];throw Error("Message not found")}async deleteMessage(a){let b=this.getData(),c=b.messages.findIndex(b=>b.id===a);-1!==c&&(b.messages[c].deleted_at=new Date().toISOString(),this.setData(b),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] deleteMessage",{messageId:a}))}async blockUser(a,b){let c=this.getData();if(!c.blocks.find(c=>c.blocker_id===a&&c.blocked_id===b)){let d={blocker_id:a,blocked_id:b,created_at:new Date().toISOString()};c.blocks.push(d),this.setData(c),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] blockUser",{blockerId:a,blockedId:b})}}async unblockUser(a,b){let c=this.getData();c.blocks=c.blocks.filter(c=>c.blocker_id!==a||c.blocked_id!==b),this.setData(c),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] unblockUser",{blockerId:a,blockedId:b})}async isBlocked(a,b){let c=this.getData().blocks.some(c=>c.blocker_id===a&&c.blocked_id===b);return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] isBlocked",{blockerId:a,blockedId:b,isBlocked:c}),c}async reportUser(a,b,c){let d=this.getData(),e={id:crypto.randomUUID(),reporter_id:a,reported_user_id:b,reason:c,created_at:new Date().toISOString()};return d.reports.push(e),this.setData(d),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] reportUser",{reporterId:a,reportedUserId:b,reason:c}),e}async reportMessage(a,b,c){let d=this.getData(),e={id:crypto.randomUUID(),reporter_id:a,message_id:b,reason:c,created_at:new Date().toISOString()};return d.reports.push(e),this.setData(d),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] reportMessage",{reporterId:a,messageId:b,reason:c}),e}setTypingStatus(a,b,c){this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] setTypingStatus",{conversationId:a,userId:b,isTyping:c});let d=this.getData(),e=Date.now(),f=d.typingIndicators[a]||[];if(c){let a=f.findIndex(a=>a.userId===b);a>=0?f[a].timestamp=e:f.push({userId:b,timestamp:e})}else{let a=f.findIndex(a=>a.userId===b);a>=0&&f.splice(a,1)}d.typingIndicators[a]=f,this.setData(d)}async getTypingUsers(a){let b=this.getData(),c=Date.now()-5e3,d=(b.typingIndicators[a]||[]).filter(a=>a.timestamp>c);b.typingIndicators[a]=d,this.setData(b);let e=d.map(a=>a.userId);return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] getTypingUsers",{conversationId:a,userIds:e}),e}async markAsRead(a,b,c){let d=this.getData(),e=d.conversationMembers.findIndex(c=>c.conversation_id===a&&c.user_id===b);-1!==e&&(d.conversationMembers[e].last_read_at=c,this.setData(d),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] markAsRead",{conversationId:a,userId:b,lastReadAt:c}))}async getUnreadCount(a,b){let c=this.getData(),d=c.conversationMembers.find(c=>c.conversation_id===a&&c.user_id===b),e=new Date(d?.last_read_at?d.last_read_at:0),f=c.messages.filter(c=>c.conversation_id===a&&new Date(c.created_at)>e&&c.sender_id!==b).length;return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][LocalDB] getUnreadCount",{conversationId:a,userId:b,unreadCount:f}),f}}var c=a.i(83160);class d{supabase;DEBUG_COMMUNITY="true"===process.env.DEBUG_COMMUNITY;constructor(){this.supabase=(0,c.createClient)("https://toorbxzuursbcykjujhh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvb3JieHp1dXJzYmN5a2p1amhoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2OTI0NDQsImV4cCI6MjA4MzI2ODQ0NH0.ciBMNKhEpYDQP1g-JjlP_1amlDPccc4YJbJ4LNiOwX8")}async getProfile(a){let{data:b,error:c}=await this.supabase.from("profiles").select("*").eq("id",a).single();return c?(this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] getProfile error",c),null):(this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] getProfile",{userId:a,profile:b?"found":"not found"}),b)}async updateProfile(a,b){let{data:c,error:d}=await this.supabase.from("profiles").update({...b,last_seen_at:new Date().toISOString()}).eq("id",a).select().single();if(d)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] updateProfile error",d),d;return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] updateProfile",{userId:a,data:b}),c}async searchProfiles(a){let{data:b,error:c}=await this.supabase.from("profiles").select("*").or(`username.ilike.%${a}%,display_name.ilike.%${a}%`);return c?(this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] searchProfiles error",c),[]):(this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] searchProfiles",{query:a,results:b?.length||0}),b)}async createFriendRequest(a,b){let c={id:crypto.randomUUID(),requester_id:a,addressee_id:b,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:d,error:e}=await this.supabase.from("friend_requests").insert([c]).select().single();if(e)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] createFriendRequest error",e),e;return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] createFriendRequest",{requesterId:a,addresseeId:b,requestId:d.id}),d}async updateFriendRequest(a,b){let{data:c,error:d}=await this.supabase.from("friend_requests").update({status:b,updated_at:new Date().toISOString()}).eq("id",a).select().single();if(d)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] updateFriendRequest error",d),d;if("accepted"===b&&c){let a={user_id:c.requester_id,friend_id:c.addressee_id,created_at:new Date().toISOString()},b={user_id:c.addressee_id,friend_id:c.requester_id,created_at:new Date().toISOString()};await this.supabase.from("friends").insert([a,b])}return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] updateFriendRequest",{requestId:a,status:b}),c}async getFriendRequests(a){let{data:b,error:c}=await this.supabase.from("friend_requests").select("*").or(`requester_id.eq.${a},addressee_id.eq.${a}`);return c?(this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] getFriendRequests error",c),[]):(this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] getFriendRequests",{userId:a,count:b?.length||0}),b)}async getFriends(a){let{data:b,error:c}=await this.supabase.from("friends").select("*").eq("user_id",a);return c?(this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] getFriends error",c),[]):(this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] getFriends",{userId:a,count:b?.length||0}),b)}async unfriend(a,b){await this.supabase.from("friends").delete().or(`(user_id.eq.${a},friend_id.eq.${b}),(user_id.eq.${b},friend_id.eq.${a})`),this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] unfriend",{userId:a,friendId:b})}async createConversation(a,b,c,d){let e={id:crypto.randomUUID(),is_group:a,title:c||(a?"Group Chat":void 0),created_by:b,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:f,error:g}=await this.supabase.from("conversations").insert([e]).select().single();if(g)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] createConversation error",g),g;if(await this.supabase.from("conversation_members").insert([{conversation_id:f.id,user_id:b,role:"owner",joined_at:new Date().toISOString()}]),d)for(let a of d)a!==b&&await this.supabase.from("conversation_members").insert([{conversation_id:f.id,user_id:a,role:"member",joined_at:new Date().toISOString()}]);return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] createConversation",{isGroup:a,createdBy:b,title:c,userIds:d,conversationId:f.id}),f}async getConversations(a){let{data:b,error:c}=await this.supabase.from("conversation_members").select("conversation_id").eq("user_id",a);if(c)return this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] getConversations error",c),[];let d=b.map(a=>a.conversation_id),{data:e,error:f}=await this.supabase.from("conversations").select("*").in("id",d);return f?(this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] getConversations error fetching conversations",f),[]):(this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] getConversations",{userId:a,count:e?.length||0}),e)}async getConversation(a){let{data:b,error:c}=await this.supabase.from("conversations").select("*").eq("id",a).single();return c?(this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] getConversation error",c),null):(this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] getConversation",{conversationId:a,found:!!b}),b)}async addConversationMember(a,b,c="member"){let{error:d}=await this.supabase.from("conversation_members").insert([{conversation_id:a,user_id:b,role:c,joined_at:new Date().toISOString()}]);if(d)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] addConversationMember error",d),d;this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] addConversationMember",{conversationId:a,userId:b,role:c})}async removeConversationMember(a,b){let{error:c}=await this.supabase.from("conversation_members").delete().match({conversation_id:a,user_id:b});if(c)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] removeConversationMember error",c),c;this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] removeConversationMember",{conversationId:a,userId:b})}async updateConversation(a,b){let{error:c}=await this.supabase.from("conversations").update({...b,updated_at:new Date().toISOString()}).eq("id",a);if(c)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] updateConversation error",c),c;this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] updateConversation",{conversationId:a,data:b})}async createMessage(a){let b={...a,id:crypto.randomUUID(),created_at:new Date().toISOString()},{data:c,error:d}=await this.supabase.from("messages").insert([b]).select().single();if(d)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] createMessage error",d),d;return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] createMessage",{conversationId:a.conversation_id,senderId:a.sender_id,messageId:c.id}),c}async getMessages(a,b=0,c=50){let{data:d,error:e}=await this.supabase.from("messages").select("*").eq("conversation_id",a).is("deleted_at",null).order("created_at",{ascending:!0}).range(b,b+c-1);return e?(this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] getMessages error",e),[]):(this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] getMessages",{conversationId:a,offset:b,limit:c,count:d?.length||0}),d)}async updateMessage(a,b){let{data:c,error:d}=await this.supabase.from("messages").update({body:b,edited_at:new Date().toISOString()}).eq("id",a).select().single();if(d)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] updateMessage error",d),d;return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] updateMessage",{messageId:a,body:b}),c}async deleteMessage(a){let{error:b}=await this.supabase.from("messages").update({deleted_at:new Date().toISOString()}).eq("id",a);if(b)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] deleteMessage error",b),b;this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] deleteMessage",{messageId:a})}async blockUser(a,b){let c={blocker_id:a,blocked_id:b,created_at:new Date().toISOString()},{error:d}=await this.supabase.from("blocks").insert([c]);if(d)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] blockUser error",d),d;this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] blockUser",{blockerId:a,blockedId:b})}async unblockUser(a,b){let{error:c}=await this.supabase.from("blocks").delete().match({blocker_id:a,blocked_id:b});if(c)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] unblockUser error",c),c;this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] unblockUser",{blockerId:a,blockedId:b})}async isBlocked(a,b){let{data:c,error:d}=await this.supabase.from("blocks").select("id").match({blocker_id:a,blocked_id:b}).single();if(d&&"PGRST116"!==d.code)return this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] isBlocked error",d),!1;let e=!!c;return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] isBlocked",{blockerId:a,blockedId:b,isBlocked:e}),e}async reportUser(a,b,c){let d={id:crypto.randomUUID(),reporter_id:a,reported_user_id:b,reason:c,created_at:new Date().toISOString()},{data:e,error:f}=await this.supabase.from("reports").insert([d]).select().single();if(f)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] reportUser error",f),f;return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] reportUser",{reporterId:a,reportedUserId:b,reason:c}),e}async reportMessage(a,b,c){let d={id:crypto.randomUUID(),reporter_id:a,message_id:b,reason:c,created_at:new Date().toISOString()},{data:e,error:f}=await this.supabase.from("reports").insert([d]).select().single();if(f)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] reportMessage error",f),f;return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] reportMessage",{reporterId:a,messageId:b,reason:c}),e}setTypingStatus(a,b,c){this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] setTypingStatus",{conversationId:a,userId:b,isTyping:c})}async getTypingUsers(a){return this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] getTypingUsers",{conversationId:a}),[]}async markAsRead(a,b,c){let{error:d}=await this.supabase.from("conversation_members").update({last_read_at:c}).match({conversation_id:a,user_id:b});if(d)throw this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] markAsRead error",d),d;this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] markAsRead",{conversationId:a,userId:b,lastReadAt:c})}async getUnreadCount(a,b){let{data:c,error:d}=await this.supabase.from("conversation_members").select("last_read_at").match({conversation_id:a,user_id:b}).single();if(d)return this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] getUnreadCount error getting member",d),0;let e=new Date(c?.last_read_at?c.last_read_at:0),{count:f,error:g}=await this.supabase.from("messages").select("*",{count:"exact",head:!0}).eq("conversation_id",a).gt("created_at",e.toISOString()).neq("sender_id",b).is("deleted_at",null);return g?(this.DEBUG_COMMUNITY&&console.error("[COMMUNITY][SupabaseDB] getUnreadCount error getting count",g),0):(this.DEBUG_COMMUNITY&&console.log("[COMMUNITY][SupabaseDB] getUnreadCount",{conversationId:a,userId:b,unreadCount:f}),f||0)}}let e=null,f=async()=>{if(e)return e;let a="true"===process.env.DEBUG_COMMUNITY;try{if((await fetch("https://toorbxzuursbcykjujhh.supabase.co/auth/v1/health")).ok)return a&&console.log("[COMMUNITY] Using SupabaseDB backend"),e=new d}catch(b){a&&console.log("[COMMUNITY] Supabase not reachable, using LocalDB backend")}return a&&console.log("[COMMUNITY] Using LocalDB backend"),e=new b};a.s(["getCommunityDB",0,f],86299)}];

//# sourceMappingURL=src_community_db_index_ts_1ce85a43._.js.map