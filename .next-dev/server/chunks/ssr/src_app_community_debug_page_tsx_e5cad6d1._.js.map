{"version":3,"sources":["../../../../src/app/community/debug/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuthStore } from '@/context/AuthContext';\r\nimport { getCommunityDB } from '@/community/db';\r\n\r\nconst CommunityDebugPage = () => {\r\n  const { state } = useAuthStore();\r\n  const user = state.user;\r\n  const [debugInfo, setDebugInfo] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const getDebugInfo = async () => {\r\n      try {\r\n        const db = await getCommunityDB();\r\n        \r\n        // Get basic debug info\r\n        const info: any = {\r\n          dbMode: db.constructor.name,\r\n          currentUserId: user?.id || null,\r\n          timestamp: new Date().toISOString(),\r\n          envVars: {\r\n            supabaseUrl: process.env.NEXT_PUBLIC_SUPABASE_URL ? 'SET' : 'NOT SET',\r\n            debugCommunity: process.env.DEBUG_COMMUNITY,\r\n          }\r\n        };\r\n\r\n        // If it's a local DB, get additional stats\r\n        if (db.constructor.name === 'LocalDB') {\r\n          // Note: This is just mock data since we can't access the private fields directly\r\n          info.localStats = {\r\n            profilesCount: 'N/A - Internal access',\r\n            conversationsCount: 'N/A - Internal access',\r\n            messagesCount: 'N/A - Internal access',\r\n          };\r\n        }\r\n\r\n        setDebugInfo(info);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('[COMMUNITY][DEBUG] Error getting debug info:', err);\r\n        setError('Failed to get debug info: ' + (err as Error).message);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      getDebugInfo();\r\n    }\r\n  }, [user]);\r\n\r\n  if (typeof window !== 'undefined' && process.env.NODE_ENV !== 'development') {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-900 text-white flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-red-400 mb-4\">Access Denied</h2>\r\n          <p className=\"text-gray-300\">Debug page only available in development mode</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-900 text-white p-8\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <h1 className=\"text-3xl font-bold mb-8 text-accent-primary\">Community Debug</h1>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"h-8 bg-gray-700 rounded w-1/4 mb-6\"></div>\r\n            <div className=\"space-y-4\">\r\n              <div className=\"h-4 bg-gray-700 rounded\"></div>\r\n              <div className=\"h-4 bg-gray-700 rounded w-5/6\"></div>\r\n              <div className=\"h-4 bg-gray-700 rounded w-4/6\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-900 text-white p-8\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <h1 className=\"text-3xl font-bold mb-8 text-accent-primary\">Community Debug</h1>\r\n          <div className=\"bg-red-900/30 border border-red-700 rounded-lg p-4 text-red-300\">\r\n            {error}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-900 text-white p-8\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <h1 className=\"text-3xl font-bold mb-8 text-accent-primary\">Community Debug</h1>\r\n        \r\n        <div className=\"space-y-6\">\r\n          <div className=\"bg-gray-800/50 rounded-lg p-6 border border-gray-700\">\r\n            <h2 className=\"text-xl font-semibold mb-4 text-accent-primary\">System Info</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <h3 className=\"font-medium text-gray-400\">Database Mode</h3>\r\n                <p className=\"text-white\">{debugInfo?.dbMode}</p>\r\n              </div>\r\n              <div>\r\n                <h3 className=\"font-medium text-gray-400\">Current User ID</h3>\r\n                <p className=\"text-white\">{debugInfo?.currentUserId || 'None'}</p>\r\n              </div>\r\n              <div>\r\n                <h3 className=\"font-medium text-gray-400\">Timestamp</h3>\r\n                <p className=\"text-white\">{debugInfo?.timestamp}</p>\r\n              </div>\r\n              <div>\r\n                <h3 className=\"font-medium text-gray-400\">Debug Enabled</h3>\r\n                <p className=\"text-white\">{debugInfo?.envVars.debugCommunity || 'false'}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-gray-800/50 rounded-lg p-6 border border-gray-700\">\r\n            <h2 className=\"text-xl font-semibold mb-4 text-accent-primary\">Environment Variables</h2>\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-400\">NEXT_PUBLIC_SUPABASE_URL</span>\r\n                <span className=\"text-white\">{debugInfo?.envVars.supabaseUrl}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-400\">DEBUG_COMMUNITY</span>\r\n                <span className=\"text-white\">{debugInfo?.envVars.debugCommunity || 'false'}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {debugInfo?.localStats && (\r\n            <div className=\"bg-gray-800/50 rounded-lg p-6 border border-gray-700\">\r\n              <h2 className=\"text-xl font-semibold mb-4 text-accent-primary\">Local DB Stats</h2>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div>\r\n                  <h3 className=\"font-medium text-gray-400\">Profiles</h3>\r\n                  <p className=\"text-white\">{debugInfo.localStats.profilesCount}</p>\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"font-medium text-gray-400\">Conversations</h3>\r\n                  <p className=\"text-white\">{debugInfo.localStats.conversationsCount}</p>\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"font-medium text-gray-400\">Messages</h3>\r\n                  <p className=\"text-white\">{debugInfo.localStats.messagesCount}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"bg-gray-800/50 rounded-lg p-6 border border-gray-700\">\r\n            <h2 className=\"text-xl font-semibold mb-4 text-accent-primary\">Actions</h2>\r\n            <div className=\"flex flex-wrap gap-4\">\r\n              <button \r\n                onClick={() => window.location.reload()}\r\n                className=\"px-4 py-2 bg-accent-primary text-white rounded-lg hover:bg-accent-primary/90 border border-accent-primary\"\r\n              >\r\n                Refresh Debug Info\r\n              </button>\r\n              <button \r\n                onClick={() => console.log('[COMMUNITY] Manual debug log')}\r\n                className=\"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600\"\r\n              >\r\n                Trigger Debug Log\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommunityDebugPage;"],"names":[],"mappings":"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"}