{"version":3,"sources":["../../../../src/community/db/LocalDB.ts","../../../../src/community/db/SupabaseDB.ts","../../../../src/community/db/index.ts"],"sourcesContent":["import { CommunityDB, Profile, FriendRequest, Friend, Conversation, ConversationMember, Message, Block, Report } from './types';\r\n\r\ninterface Data {\r\n  profiles: Profile[];\r\n  friendRequests: FriendRequest[];\r\n  friends: Friend[];\r\n  conversations: Conversation[];\r\n  conversationMembers: ConversationMember[];\r\n  messages: Message[];\r\n  blocks: Block[];\r\n  reports: Report[];\r\n  typingIndicators: Record<string, { userId: string; timestamp: number }[]>;\r\n}\r\n\r\nexport class LocalDB implements CommunityDB {\r\n  private storageKey = 'vibeschool-community-data';\r\n  private DEBUG_COMMUNITY = process.env.DEBUG_COMMUNITY === 'true';\r\n\r\n  constructor() {\r\n    // Initialize with default data if not exists\r\n    this.initStorage();\r\n  }\r\n\r\n  private initStorage() {\r\n    if (typeof window !== 'undefined') {\r\n      if (!localStorage.getItem(this.storageKey)) {\r\n        const defaultData: Data = {\r\n          profiles: [],\r\n          friendRequests: [],\r\n          friends: [],\r\n          conversations: [],\r\n          conversationMembers: [],\r\n          messages: [],\r\n          blocks: [],\r\n          reports: [],\r\n          typingIndicators: {},\r\n        };\r\n        localStorage.setItem(this.storageKey, JSON.stringify(defaultData));\r\n      }\r\n    }\r\n  }\r\n\r\n  private getData(): Data {\r\n    if (typeof window === 'undefined') {\r\n      return {\r\n        profiles: [],\r\n        friendRequests: [],\r\n        friends: [],\r\n        conversations: [],\r\n        conversationMembers: [],\r\n        messages: [],\r\n        blocks: [],\r\n        reports: [],\r\n        typingIndicators: {},\r\n      };\r\n    }\r\n    \r\n    const dataStr = localStorage.getItem(this.storageKey);\r\n    if (!dataStr) {\r\n      this.initStorage();\r\n      return this.getData();\r\n    }\r\n    \r\n    try {\r\n      return JSON.parse(dataStr) as Data;\r\n    } catch (error) {\r\n      console.error('[COMMUNITY][LocalDB] Error parsing data:', error);\r\n      this.initStorage();\r\n      return this.getData();\r\n    }\r\n  }\r\n\r\n  private setData(data: Data) {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem(this.storageKey, JSON.stringify(data));\r\n    }\r\n  }\r\n\r\n  // Profiles\r\n  async getProfile(userId: string): Promise<Profile | null> {\r\n    const data = this.getData();\r\n    const profile = data.profiles.find(p => p.id === userId) || null;\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] getProfile', { userId, profile: profile ? 'found' : 'not found' });\r\n    }\r\n    \r\n    return profile;\r\n  }\r\n\r\n  async updateProfile(userId: string, data: Partial<Omit<Profile, 'id' | 'created_at'>>): Promise<Profile> {\r\n    const currentData = this.getData();\r\n    const existingIndex = currentData.profiles.findIndex(p => p.id === userId);\r\n    \r\n    if (existingIndex !== -1) {\r\n      currentData.profiles[existingIndex] = {\r\n        ...currentData.profiles[existingIndex],\r\n        ...data,\r\n        last_seen_at: new Date().toISOString(),\r\n      };\r\n    } else {\r\n      const newProfile: Profile = {\r\n        id: userId,\r\n        username: data.username || '',\r\n        display_name: data.display_name || '',\r\n        avatar_url: data.avatar_url,\r\n        role: data.role || 'student',\r\n        created_at: new Date().toISOString(),\r\n        last_seen_at: new Date().toISOString(),\r\n        is_online: false,\r\n      };\r\n      currentData.profiles.push(newProfile);\r\n    }\r\n    \r\n    this.setData(currentData);\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] updateProfile', { userId, data });\r\n    }\r\n    \r\n    return currentData.profiles.find(p => p.id === userId)!;\r\n  }\r\n\r\n  async searchProfiles(query: string): Promise<Profile[]> {\r\n    const data = this.getData();\r\n    const lowerQuery = query.toLowerCase();\r\n    const results = data.profiles.filter(p => \r\n      p.username.toLowerCase().includes(lowerQuery) || \r\n      p.display_name.toLowerCase().includes(lowerQuery)\r\n    );\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] searchProfiles', { query, results: results.length });\r\n    }\r\n    \r\n    return results;\r\n  }\r\n\r\n  // Friend Requests\r\n  async createFriendRequest(requesterId: string, addresseeId: string): Promise<FriendRequest> {\r\n    const currentData = this.getData();\r\n    const newRequest: FriendRequest = {\r\n      id: crypto.randomUUID(),\r\n      requester_id: requesterId,\r\n      addressee_id: addresseeId,\r\n      status: 'pending',\r\n      created_at: new Date().toISOString(),\r\n      updated_at: new Date().toISOString(),\r\n    };\r\n    \r\n    currentData.friendRequests.push(newRequest);\r\n    this.setData(currentData);\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] createFriendRequest', { requesterId, addresseeId, requestId: newRequest.id });\r\n    }\r\n    \r\n    return newRequest;\r\n  }\r\n\r\n  async updateFriendRequest(requestId: string, status: 'accepted' | 'declined' | 'cancelled'): Promise<FriendRequest> {\r\n    const currentData = this.getData();\r\n    const index = currentData.friendRequests.findIndex(r => r.id === requestId);\r\n    \r\n    if (index !== -1) {\r\n      currentData.friendRequests[index].status = status;\r\n      currentData.friendRequests[index].updated_at = new Date().toISOString();\r\n      \r\n      // If accepted, create friendship entries\r\n      if (status === 'accepted') {\r\n        const request = currentData.friendRequests[index];\r\n        const friendEntry1: Friend = {\r\n          user_id: request.requester_id,\r\n          friend_id: request.addressee_id,\r\n          created_at: new Date().toISOString(),\r\n        };\r\n        const friendEntry2: Friend = {\r\n          user_id: request.addressee_id,\r\n          friend_id: request.requester_id,\r\n          created_at: new Date().toISOString(),\r\n        };\r\n        currentData.friends.push(friendEntry1, friendEntry2);\r\n      }\r\n      \r\n      this.setData(currentData);\r\n      \r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.log('[COMMUNITY][LocalDB] updateFriendRequest', { requestId, status });\r\n      }\r\n      \r\n      return currentData.friendRequests[index];\r\n    }\r\n    \r\n    throw new Error('Friend request not found');\r\n  }\r\n\r\n  async getFriendRequests(userId: string): Promise<FriendRequest[]> {\r\n    const data = this.getData();\r\n    const requests = data.friendRequests.filter(\r\n      r => r.addressee_id === userId || r.requester_id === userId\r\n    );\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] getFriendRequests', { userId, count: requests.length });\r\n    }\r\n    \r\n    return requests;\r\n  }\r\n\r\n  // Friends\r\n  async getFriends(userId: string): Promise<Friend[]> {\r\n    const data = this.getData();\r\n    const friends = data.friends.filter(f => f.user_id === userId);\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] getFriends', { userId, count: friends.length });\r\n    }\r\n    \r\n    return friends;\r\n  }\r\n\r\n  async unfriend(userId: string, friendId: string): Promise<void> {\r\n    const currentData = this.getData();\r\n    currentData.friends = currentData.friends.filter(\r\n      f => !(f.user_id === userId && f.friend_id === friendId) ||\r\n           !(f.user_id === friendId && f.friend_id === userId)\r\n    );\r\n    this.setData(currentData);\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] unfriend', { userId, friendId });\r\n    }\r\n  }\r\n\r\n  // Conversations\r\n  async createConversation(isGroup: boolean, createdBy: string, title?: string, userIds?: string[]): Promise<Conversation> {\r\n    const currentData = this.getData();\r\n    const newConversation: Conversation = {\r\n      id: crypto.randomUUID(),\r\n      is_group: isGroup,\r\n      title: title || (isGroup ? 'Group Chat' : undefined),\r\n      created_by: createdBy,\r\n      created_at: new Date().toISOString(),\r\n      updated_at: new Date().toISOString(),\r\n    };\r\n    \r\n    currentData.conversations.push(newConversation);\r\n    \r\n    // Add creator as member\r\n    const creatorMember: ConversationMember = {\r\n      conversation_id: newConversation.id,\r\n      user_id: createdBy,\r\n      role: 'owner',\r\n      joined_at: new Date().toISOString(),\r\n    };\r\n    currentData.conversationMembers.push(creatorMember);\r\n    \r\n    // Add other users if provided\r\n    if (userIds) {\r\n      for (const userId of userIds) {\r\n        if (userId !== createdBy) {\r\n          const member: ConversationMember = {\r\n            conversation_id: newConversation.id,\r\n            user_id: userId,\r\n            role: 'member',\r\n            joined_at: new Date().toISOString(),\r\n          };\r\n          currentData.conversationMembers.push(member);\r\n        }\r\n      }\r\n    }\r\n    \r\n    this.setData(currentData);\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] createConversation', { isGroup, createdBy, title, userIds, conversationId: newConversation.id });\r\n    }\r\n    \r\n    return newConversation;\r\n  }\r\n\r\n  async getConversations(userId: string): Promise<Conversation[]> {\r\n    const data = this.getData();\r\n    const userConversations = data.conversationMembers\r\n      .filter(cm => cm.user_id === userId)\r\n      .map(cm => cm.conversation_id);\r\n    \r\n    const conversations = data.conversations.filter(c => \r\n      userConversations.includes(c.id)\r\n    );\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] getConversations', { userId, count: conversations.length });\r\n    }\r\n    \r\n    return conversations;\r\n  }\r\n\r\n  async getConversation(conversationId: string): Promise<Conversation | null> {\r\n    const data = this.getData();\r\n    const conversation = data.conversations.find(c => c.id === conversationId) || null;\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] getConversation', { conversationId, found: !!conversation });\r\n    }\r\n    \r\n    return conversation;\r\n  }\r\n\r\n  async addConversationMember(conversationId: string, userId: string, role: 'owner' | 'admin' | 'member' = 'member'): Promise<void> {\r\n    const currentData = this.getData();\r\n    const existingMember = currentData.conversationMembers.find(\r\n      cm => cm.conversation_id === conversationId && cm.user_id === userId\r\n    );\r\n    \r\n    if (!existingMember) {\r\n      const member: ConversationMember = {\r\n        conversation_id: conversationId,\r\n        user_id: userId,\r\n        role,\r\n        joined_at: new Date().toISOString(),\r\n      };\r\n      currentData.conversationMembers.push(member);\r\n      this.setData(currentData);\r\n      \r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.log('[COMMUNITY][LocalDB] addConversationMember', { conversationId, userId, role });\r\n      }\r\n    }\r\n  }\r\n\r\n  async removeConversationMember(conversationId: string, userId: string): Promise<void> {\r\n    const currentData = this.getData();\r\n    currentData.conversationMembers = currentData.conversationMembers.filter(\r\n      cm => !(cm.conversation_id === conversationId && cm.user_id === userId)\r\n    );\r\n    this.setData(currentData);\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] removeConversationMember', { conversationId, userId });\r\n    }\r\n  }\r\n\r\n  async updateConversation(conversationId: string, data: Partial<Omit<Conversation, 'id' | 'created_by' | 'created_at'>>): Promise<void> {\r\n    const currentData = this.getData();\r\n    const index = currentData.conversations.findIndex(c => c.id === conversationId);\r\n    \r\n    if (index !== -1) {\r\n      currentData.conversations[index] = {\r\n        ...currentData.conversations[index],\r\n        ...data,\r\n        updated_at: new Date().toISOString(),\r\n      };\r\n      this.setData(currentData);\r\n      \r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.log('[COMMUNITY][LocalDB] updateConversation', { conversationId, data });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Messages\r\n  async createMessage(message: Omit<Message, 'id' | 'created_at'>): Promise<Message> {\r\n    const currentData = this.getData();\r\n    const newMessage: Message = {\r\n      ...message,\r\n      id: crypto.randomUUID(),\r\n      created_at: new Date().toISOString(),\r\n    };\r\n    currentData.messages.push(newMessage);\r\n    this.setData(currentData);\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] createMessage', { conversationId: message.conversation_id, senderId: message.sender_id, messageId: newMessage.id });\r\n    }\r\n    \r\n    return newMessage;\r\n  }\r\n\r\n  async getMessages(conversationId: string, offset: number = 0, limit: number = 50): Promise<Message[]> {\r\n    const data = this.getData();\r\n    const messages = data.messages\r\n      .filter(m => m.conversation_id === conversationId && !m.deleted_at)\r\n      .sort((a, b) => new Date(a.created_at).getTime() - new Date(b.created_at).getTime())\r\n      .slice(offset, offset + limit);\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] getMessages', { conversationId, offset, limit, count: messages.length });\r\n    }\r\n    \r\n    return messages;\r\n  }\r\n\r\n  async updateMessage(messageId: string, body: string): Promise<Message> {\r\n    const currentData = this.getData();\r\n    const index = currentData.messages.findIndex(m => m.id === messageId);\r\n    \r\n    if (index !== -1) {\r\n      currentData.messages[index].body = body;\r\n      currentData.messages[index].edited_at = new Date().toISOString();\r\n      this.setData(currentData);\r\n      \r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.log('[COMMUNITY][LocalDB] updateMessage', { messageId, body });\r\n      }\r\n      \r\n      return currentData.messages[index];\r\n    }\r\n    \r\n    throw new Error('Message not found');\r\n  }\r\n\r\n  async deleteMessage(messageId: string): Promise<void> {\r\n    const currentData = this.getData();\r\n    const index = currentData.messages.findIndex(m => m.id === messageId);\r\n    \r\n    if (index !== -1) {\r\n      currentData.messages[index].deleted_at = new Date().toISOString();\r\n      this.setData(currentData);\r\n      \r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.log('[COMMUNITY][LocalDB] deleteMessage', { messageId });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Blocks\r\n  async blockUser(blockerId: string, blockedId: string): Promise<void> {\r\n    const currentData = this.getData();\r\n    const existingBlock = currentData.blocks.find(\r\n      b => b.blocker_id === blockerId && b.blocked_id === blockedId\r\n    );\r\n    \r\n    if (!existingBlock) {\r\n      const block: Block = {\r\n        blocker_id: blockerId,\r\n        blocked_id: blockedId,\r\n        created_at: new Date().toISOString(),\r\n      };\r\n      currentData.blocks.push(block);\r\n      this.setData(currentData);\r\n      \r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.log('[COMMUNITY][LocalDB] blockUser', { blockerId, blockedId });\r\n      }\r\n    }\r\n  }\r\n\r\n  async unblockUser(blockerId: string, blockedId: string): Promise<void> {\r\n    const currentData = this.getData();\r\n    currentData.blocks = currentData.blocks.filter(\r\n      b => !(b.blocker_id === blockerId && b.blocked_id === blockedId)\r\n    );\r\n    this.setData(currentData);\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] unblockUser', { blockerId, blockedId });\r\n    }\r\n  }\r\n\r\n  async isBlocked(blockerId: string, blockedId: string): Promise<boolean> {\r\n    const data = this.getData();\r\n    const isBlocked = data.blocks.some(\r\n      b => b.blocker_id === blockerId && b.blocked_id === blockedId\r\n    );\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] isBlocked', { blockerId, blockedId, isBlocked });\r\n    }\r\n    \r\n    return isBlocked;\r\n  }\r\n\r\n  // Reports\r\n  async reportUser(reporterId: string, reportedUserId: string, reason: string): Promise<Report> {\r\n    const currentData = this.getData();\r\n    const newReport: Report = {\r\n      id: crypto.randomUUID(),\r\n      reporter_id: reporterId,\r\n      reported_user_id: reportedUserId,\r\n      reason,\r\n      created_at: new Date().toISOString(),\r\n    };\r\n    currentData.reports.push(newReport);\r\n    this.setData(currentData);\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] reportUser', { reporterId, reportedUserId, reason });\r\n    }\r\n    \r\n    return newReport;\r\n  }\r\n\r\n  async reportMessage(reporterId: string, messageId: string, reason: string): Promise<Report> {\r\n    const currentData = this.getData();\r\n    const newReport: Report = {\r\n      id: crypto.randomUUID(),\r\n      reporter_id: reporterId,\r\n      message_id: messageId,\r\n      reason,\r\n      created_at: new Date().toISOString(),\r\n    };\r\n    currentData.reports.push(newReport);\r\n    this.setData(currentData);\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] reportMessage', { reporterId, messageId, reason });\r\n    }\r\n    \r\n    return newReport;\r\n  }\r\n\r\n  // Typing Indicators\r\n  setTypingStatus(conversationId: string, userId: string, isTyping: boolean): void {\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] setTypingStatus', { conversationId, userId, isTyping });\r\n    }\r\n    \r\n    const data = this.getData();\r\n    const now = Date.now();\r\n    const conversationTyping = data.typingIndicators[conversationId] || [];\r\n    \r\n    if (isTyping) {\r\n      // Add user to typing list\r\n      const existingIndex = conversationTyping.findIndex(t => t.userId === userId);\r\n      if (existingIndex >= 0) {\r\n        conversationTyping[existingIndex].timestamp = now;\r\n      } else {\r\n        conversationTyping.push({ userId, timestamp: now });\r\n      }\r\n    } else {\r\n      // Remove user from typing list\r\n      const existingIndex = conversationTyping.findIndex(t => t.userId === userId);\r\n      if (existingIndex >= 0) {\r\n        conversationTyping.splice(existingIndex, 1);\r\n      }\r\n    }\r\n    \r\n    data.typingIndicators[conversationId] = conversationTyping;\r\n    this.setData(data);\r\n  }\r\n\r\n  async getTypingUsers(conversationId: string): Promise<string[]> {\r\n    const data = this.getData();\r\n    const now = Date.now();\r\n    const fiveSecondsAgo = now - 5000; // Clear typing indicators older than 5 seconds\r\n    \r\n    const conversationTyping = data.typingIndicators[conversationId] || [];\r\n    const recentTyping = conversationTyping.filter(t => t.timestamp > fiveSecondsAgo);\r\n    \r\n    // Update the typing indicators to remove stale entries\r\n    data.typingIndicators[conversationId] = recentTyping;\r\n    this.setData(data);\r\n    \r\n    const userIds = recentTyping.map(t => t.userId);\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] getTypingUsers', { conversationId, userIds });\r\n    }\r\n    return userIds;\r\n  }\r\n\r\n  // Read Receipts\r\n  async markAsRead(conversationId: string, userId: string, lastReadAt: string): Promise<void> {\r\n    const currentData = this.getData();\r\n    const memberIndex = currentData.conversationMembers.findIndex(\r\n      cm => cm.conversation_id === conversationId && cm.user_id === userId\r\n    );\r\n    \r\n    if (memberIndex !== -1) {\r\n      currentData.conversationMembers[memberIndex].last_read_at = lastReadAt;\r\n      this.setData(currentData);\r\n      \r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.log('[COMMUNITY][LocalDB] markAsRead', { conversationId, userId, lastReadAt });\r\n      }\r\n    }\r\n  }\r\n\r\n  async getUnreadCount(conversationId: string, userId: string): Promise<number> {\r\n    const data = this.getData();\r\n    const member = data.conversationMembers.find(\r\n      cm => cm.conversation_id === conversationId && cm.user_id === userId\r\n    );\r\n    \r\n    const lastReadAt = member?.last_read_at ? new Date(member.last_read_at) : new Date(0);\r\n    \r\n    const unreadCount = data.messages.filter(\r\n      m => m.conversation_id === conversationId &&\r\n           new Date(m.created_at) > lastReadAt &&\r\n           m.sender_id !== userId // Don't count own messages as unread\r\n    ).length;\r\n    \r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][LocalDB] getUnreadCount', { conversationId, userId, unreadCount });\r\n    }\r\n    return unreadCount;\r\n  }\r\n}","import { CommunityDB, Profile, FriendRequest, Friend, Conversation, ConversationMember, Message, Block, Report } from './types';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nexport class SupabaseDB implements CommunityDB {\r\n  private supabase;\r\n  private DEBUG_COMMUNITY = process.env.DEBUG_COMMUNITY === 'true';\r\n\r\n  constructor() {\r\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\n    const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n    \r\n    if (!supabaseUrl || !supabaseAnonKey) {\r\n      throw new Error('Supabase URL and Anon Key are required');\r\n    }\r\n    \r\n    this.supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n  }\r\n\r\n  // Profiles\r\n  async getProfile(userId: string): Promise<Profile | null> {\r\n    const { data, error } = await this.supabase\r\n      .from('profiles')\r\n      .select('*')\r\n      .eq('id', userId)\r\n      .single();\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] getProfile error', error);\r\n      }\r\n      return null;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] getProfile', { userId, profile: data ? 'found' : 'not found' });\r\n    }\r\n    return data as Profile;\r\n  }\r\n\r\n  async updateProfile(userId: string, data: Partial<Omit<Profile, 'id' | 'created_at'>>): Promise<Profile> {\r\n    const { data: updatedData, error } = await this.supabase\r\n      .from('profiles')\r\n      .update({\r\n        ...data,\r\n        last_seen_at: new Date().toISOString(),\r\n      })\r\n      .eq('id', userId)\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] updateProfile error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] updateProfile', { userId, data });\r\n    }\r\n    return updatedData as Profile;\r\n  }\r\n\r\n  async searchProfiles(query: string): Promise<Profile[]> {\r\n    const { data, error } = await this.supabase\r\n      .from('profiles')\r\n      .select('*')\r\n      .or(`username.ilike.%${query}%,display_name.ilike.%${query}%`);\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] searchProfiles error', error);\r\n      }\r\n      return [];\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] searchProfiles', { query, results: data?.length || 0 });\r\n    }\r\n    return data as Profile[];\r\n  }\r\n\r\n  // Friend Requests\r\n  async createFriendRequest(requesterId: string, addresseeId: string): Promise<FriendRequest> {\r\n    const newRequest = {\r\n      id: crypto.randomUUID(),\r\n      requester_id: requesterId,\r\n      addressee_id: addresseeId,\r\n      status: 'pending',\r\n      created_at: new Date().toISOString(),\r\n      updated_at: new Date().toISOString(),\r\n    };\r\n\r\n    const { data, error } = await this.supabase\r\n      .from('friend_requests')\r\n      .insert([newRequest])\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] createFriendRequest error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] createFriendRequest', { requesterId, addresseeId, requestId: data.id });\r\n    }\r\n    return data as FriendRequest;\r\n  }\r\n\r\n  async updateFriendRequest(requestId: string, status: 'accepted' | 'declined' | 'cancelled'): Promise<FriendRequest> {\r\n    const { data, error } = await this.supabase\r\n      .from('friend_requests')\r\n      .update({ \r\n        status,\r\n        updated_at: new Date().toISOString()\r\n      })\r\n      .eq('id', requestId)\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] updateFriendRequest error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    // If accepted, create friendship entries\r\n    if (status === 'accepted' && data) {\r\n      const request = data as FriendRequest;\r\n      const friendEntry1 = {\r\n        user_id: request.requester_id,\r\n        friend_id: request.addressee_id,\r\n        created_at: new Date().toISOString(),\r\n      };\r\n      const friendEntry2 = {\r\n        user_id: request.addressee_id,\r\n        friend_id: request.requester_id,\r\n        created_at: new Date().toISOString(),\r\n      };\r\n\r\n      await this.supabase.from('friends').insert([friendEntry1, friendEntry2]);\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] updateFriendRequest', { requestId, status });\r\n    }\r\n    return data as FriendRequest;\r\n  }\r\n\r\n  async getFriendRequests(userId: string): Promise<FriendRequest[]> {\r\n    const { data, error } = await this.supabase\r\n      .from('friend_requests')\r\n      .select('*')\r\n      .or(`requester_id.eq.${userId},addressee_id.eq.${userId}`);\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] getFriendRequests error', error);\r\n      }\r\n      return [];\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] getFriendRequests', { userId, count: data?.length || 0 });\r\n    }\r\n    return data as FriendRequest[];\r\n  }\r\n\r\n  // Friends\r\n  async getFriends(userId: string): Promise<Friend[]> {\r\n    const { data, error } = await this.supabase\r\n      .from('friends')\r\n      .select('*')\r\n      .eq('user_id', userId);\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] getFriends error', error);\r\n      }\r\n      return [];\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] getFriends', { userId, count: data?.length || 0 });\r\n    }\r\n    return data as Friend[];\r\n  }\r\n\r\n  async unfriend(userId: string, friendId: string): Promise<void> {\r\n    await this.supabase\r\n      .from('friends')\r\n      .delete()\r\n      .or(`(user_id.eq.${userId},friend_id.eq.${friendId}),(user_id.eq.${friendId},friend_id.eq.${userId})`);\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] unfriend', { userId, friendId });\r\n    }\r\n  }\r\n\r\n  // Conversations\r\n  async createConversation(isGroup: boolean, createdBy: string, title?: string, userIds?: string[]): Promise<Conversation> {\r\n    const newConversation = {\r\n      id: crypto.randomUUID(),\r\n      is_group: isGroup,\r\n      title: title || (isGroup ? 'Group Chat' : undefined),\r\n      created_by: createdBy,\r\n      created_at: new Date().toISOString(),\r\n      updated_at: new Date().toISOString(),\r\n    };\r\n\r\n    const { data, error } = await this.supabase\r\n      .from('conversations')\r\n      .insert([newConversation])\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] createConversation error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    // Add creator as member\r\n    await this.supabase.from('conversation_members').insert([\r\n      {\r\n        conversation_id: data.id,\r\n        user_id: createdBy,\r\n        role: 'owner',\r\n        joined_at: new Date().toISOString(),\r\n      }\r\n    ]);\r\n\r\n    // Add other users if provided\r\n    if (userIds) {\r\n      for (const userId of userIds) {\r\n        if (userId !== createdBy) {\r\n          await this.supabase.from('conversation_members').insert([\r\n            {\r\n              conversation_id: data.id,\r\n              user_id: userId,\r\n              role: 'member',\r\n              joined_at: new Date().toISOString(),\r\n            }\r\n          ]);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] createConversation', { isGroup, createdBy, title, userIds, conversationId: data.id });\r\n    }\r\n    return data as Conversation;\r\n  }\r\n\r\n  async getConversations(userId: string): Promise<Conversation[]> {\r\n    const { data, error } = await this.supabase\r\n      .from('conversation_members')\r\n      .select('conversation_id')\r\n      .eq('user_id', userId);\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] getConversations error', error);\r\n      }\r\n      return [];\r\n    }\r\n\r\n    const conversationIds = data.map(cm => cm.conversation_id);\r\n\r\n    const { data: conversations, error: convError } = await this.supabase\r\n      .from('conversations')\r\n      .select('*')\r\n      .in('id', conversationIds);\r\n\r\n    if (convError) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] getConversations error fetching conversations', convError);\r\n      }\r\n      return [];\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] getConversations', { userId, count: conversations?.length || 0 });\r\n    }\r\n    return conversations as Conversation[];\r\n  }\r\n\r\n  async getConversation(conversationId: string): Promise<Conversation | null> {\r\n    const { data, error } = await this.supabase\r\n      .from('conversations')\r\n      .select('*')\r\n      .eq('id', conversationId)\r\n      .single();\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] getConversation error', error);\r\n      }\r\n      return null;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] getConversation', { conversationId, found: !!data });\r\n    }\r\n    return data as Conversation;\r\n  }\r\n\r\n  async addConversationMember(conversationId: string, userId: string, role: 'owner' | 'admin' | 'member' = 'member'): Promise<void> {\r\n    const { error } = await this.supabase\r\n      .from('conversation_members')\r\n      .insert([\r\n        {\r\n          conversation_id: conversationId,\r\n          user_id: userId,\r\n          role,\r\n          joined_at: new Date().toISOString(),\r\n        }\r\n      ]);\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] addConversationMember error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] addConversationMember', { conversationId, userId, role });\r\n    }\r\n  }\r\n\r\n  async removeConversationMember(conversationId: string, userId: string): Promise<void> {\r\n    const { error } = await this.supabase\r\n      .from('conversation_members')\r\n      .delete()\r\n      .match({ conversation_id: conversationId, user_id: userId });\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] removeConversationMember error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] removeConversationMember', { conversationId, userId });\r\n    }\r\n  }\r\n\r\n  async updateConversation(conversationId: string, data: Partial<Omit<Conversation, 'id' | 'created_by' | 'created_at'>>): Promise<void> {\r\n    const { error } = await this.supabase\r\n      .from('conversations')\r\n      .update({\r\n        ...data,\r\n        updated_at: new Date().toISOString(),\r\n      })\r\n      .eq('id', conversationId);\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] updateConversation error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] updateConversation', { conversationId, data });\r\n    }\r\n  }\r\n\r\n  // Messages\r\n  async createMessage(message: Omit<Message, 'id' | 'created_at'>): Promise<Message> {\r\n    const newMessage = {\r\n      ...message,\r\n      id: crypto.randomUUID(),\r\n      created_at: new Date().toISOString(),\r\n    };\r\n\r\n    const { data, error } = await this.supabase\r\n      .from('messages')\r\n      .insert([newMessage])\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] createMessage error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] createMessage', { conversationId: message.conversation_id, senderId: message.sender_id, messageId: data.id });\r\n    }\r\n    return data as Message;\r\n  }\r\n\r\n  async getMessages(conversationId: string, offset: number = 0, limit: number = 50): Promise<Message[]> {\r\n    const { data, error } = await this.supabase\r\n      .from('messages')\r\n      .select('*')\r\n      .eq('conversation_id', conversationId)\r\n      .is('deleted_at', null)\r\n      .order('created_at', { ascending: true })\r\n      .range(offset, offset + limit - 1);\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] getMessages error', error);\r\n      }\r\n      return [];\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] getMessages', { conversationId, offset, limit, count: data?.length || 0 });\r\n    }\r\n    return data as Message[];\r\n  }\r\n\r\n  async updateMessage(messageId: string, body: string): Promise<Message> {\r\n    const { data, error } = await this.supabase\r\n      .from('messages')\r\n      .update({ \r\n        body,\r\n        edited_at: new Date().toISOString(),\r\n      })\r\n      .eq('id', messageId)\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] updateMessage error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] updateMessage', { messageId, body });\r\n    }\r\n    return data as Message;\r\n  }\r\n\r\n  async deleteMessage(messageId: string): Promise<void> {\r\n    const { error } = await this.supabase\r\n      .from('messages')\r\n      .update({ deleted_at: new Date().toISOString() })\r\n      .eq('id', messageId);\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] deleteMessage error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] deleteMessage', { messageId });\r\n    }\r\n  }\r\n\r\n  // Blocks\r\n  async blockUser(blockerId: string, blockedId: string): Promise<void> {\r\n    const block = {\r\n      blocker_id: blockerId,\r\n      blocked_id: blockedId,\r\n      created_at: new Date().toISOString(),\r\n    };\r\n\r\n    const { error } = await this.supabase\r\n      .from('blocks')\r\n      .insert([block]);\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] blockUser error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] blockUser', { blockerId, blockedId });\r\n    }\r\n  }\r\n\r\n  async unblockUser(blockerId: string, blockedId: string): Promise<void> {\r\n    const { error } = await this.supabase\r\n      .from('blocks')\r\n      .delete()\r\n      .match({ blocker_id: blockerId, blocked_id: blockedId });\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] unblockUser error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] unblockUser', { blockerId, blockedId });\r\n    }\r\n  }\r\n\r\n  async isBlocked(blockerId: string, blockedId: string): Promise<boolean> {\r\n    const { data, error } = await this.supabase\r\n      .from('blocks')\r\n      .select('id')\r\n      .match({ blocker_id: blockerId, blocked_id: blockedId })\r\n      .single();\r\n\r\n    if (error && error.code !== 'PGRST116') { // PGRST116 means no rows returned\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] isBlocked error', error);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    const isBlocked = !!data;\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] isBlocked', { blockerId, blockedId, isBlocked });\r\n    }\r\n    return isBlocked;\r\n  }\r\n\r\n  // Reports\r\n  async reportUser(reporterId: string, reportedUserId: string, reason: string): Promise<Report> {\r\n    const newReport = {\r\n      id: crypto.randomUUID(),\r\n      reporter_id: reporterId,\r\n      reported_user_id: reportedUserId,\r\n      reason,\r\n      created_at: new Date().toISOString(),\r\n    };\r\n\r\n    const { data, error } = await this.supabase\r\n      .from('reports')\r\n      .insert([newReport])\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] reportUser error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] reportUser', { reporterId, reportedUserId, reason });\r\n    }\r\n    return data as Report;\r\n  }\r\n\r\n  async reportMessage(reporterId: string, messageId: string, reason: string): Promise<Report> {\r\n    const newReport = {\r\n      id: crypto.randomUUID(),\r\n      reporter_id: reporterId,\r\n      message_id: messageId,\r\n      reason,\r\n      created_at: new Date().toISOString(),\r\n    };\r\n\r\n    const { data, error } = await this.supabase\r\n      .from('reports')\r\n      .insert([newReport])\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] reportMessage error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] reportMessage', { reporterId, messageId, reason });\r\n    }\r\n    return data as Report;\r\n  }\r\n\r\n  // Typing Indicators (ephemeral, not stored long term)\r\n  setTypingStatus(conversationId: string, userId: string, isTyping: boolean): void {\r\n    // In Supabase mode, we'll use Supabase Realtime for typing indicators\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] setTypingStatus', { conversationId, userId, isTyping });\r\n    }\r\n  }\r\n\r\n  async getTypingUsers(conversationId: string): Promise<string[]> {\r\n    // In Supabase mode, typing indicators would be handled via Realtime subscriptions\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] getTypingUsers', { conversationId });\r\n    }\r\n    return [];\r\n  }\r\n\r\n  // Read Receipts\r\n  async markAsRead(conversationId: string, userId: string, lastReadAt: string): Promise<void> {\r\n    const { error } = await this.supabase\r\n      .from('conversation_members')\r\n      .update({ last_read_at: lastReadAt })\r\n      .match({ conversation_id: conversationId, user_id: userId });\r\n\r\n    if (error) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] markAsRead error', error);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] markAsRead', { conversationId, userId, lastReadAt });\r\n    }\r\n  }\r\n\r\n  async getUnreadCount(conversationId: string, userId: string): Promise<number> {\r\n    // Get the last read time for this user in this conversation\r\n    const { data: member, error: memberError } = await this.supabase\r\n      .from('conversation_members')\r\n      .select('last_read_at')\r\n      .match({ conversation_id: conversationId, user_id: userId })\r\n      .single();\r\n\r\n    if (memberError) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] getUnreadCount error getting member', memberError);\r\n      }\r\n      return 0;\r\n    }\r\n\r\n    const lastReadAt = member?.last_read_at ? new Date(member.last_read_at) : new Date(0);\r\n\r\n    // Count messages sent after last read time by other users\r\n    const { count, error: countError } = await this.supabase\r\n      .from('messages')\r\n      .select('*', { count: 'exact', head: true })\r\n      .eq('conversation_id', conversationId)\r\n      .gt('created_at', lastReadAt.toISOString())\r\n      .neq('sender_id', userId) // Don't count own messages as unread\r\n      .is('deleted_at', null);\r\n\r\n    if (countError) {\r\n      if (this.DEBUG_COMMUNITY) {\r\n        console.error('[COMMUNITY][SupabaseDB] getUnreadCount error getting count', countError);\r\n      }\r\n      return 0;\r\n    }\r\n\r\n    if (this.DEBUG_COMMUNITY) {\r\n      console.log('[COMMUNITY][SupabaseDB] getUnreadCount', { conversationId, userId, unreadCount: count });\r\n    }\r\n    return count || 0;\r\n  }\r\n}","import { LocalDB } from './LocalDB';\r\nimport { SupabaseDB } from './SupabaseDB';\r\nimport { Profile, FriendRequest, Friend, Conversation, ConversationMember, Message, Block, Report, CommunityDB } from './types';\r\n\r\n// Ensure the classes are imported before being used in the factory function\r\nexport { LocalDB, SupabaseDB };\r\nexport type { Profile, FriendRequest, Friend, Conversation, ConversationMember, Message, Block, Report, CommunityDB };\r\n\r\nlet dbInstance: CommunityDB | null = null;\r\n\r\nexport const getCommunityDB = async (): Promise<CommunityDB> => {\r\n  if (dbInstance) {\r\n    return dbInstance;\r\n  }\r\n\r\n  const DEBUG_COMMUNITY = process.env.DEBUG_COMMUNITY === 'true';\r\n  \r\n  // Check if Supabase is available\r\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\n  \r\n  if (supabaseUrl) {\r\n    try {\r\n      const response = await fetch(`${supabaseUrl}/auth/v1/health`);\r\n      if (response.ok) {\r\n        if (DEBUG_COMMUNITY) {\r\n          console.log('[COMMUNITY] Using SupabaseDB backend');\r\n        }\r\n        dbInstance = new SupabaseDB();\r\n        return dbInstance as CommunityDB;\r\n      }\r\n    } catch (error) {\r\n      if (DEBUG_COMMUNITY) {\r\n        console.log('[COMMUNITY] Supabase not reachable, using LocalDB backend');\r\n      }\r\n    }\r\n  }\r\n  \r\n  if (DEBUG_COMMUNITY) {\r\n    console.log('[COMMUNITY] Using LocalDB backend');\r\n  }\r\n  dbInstance = new LocalDB();\r\n  return dbInstance!;\r\n};"],"names":[],"mappings":"sCAcO,OAAM,EACH,WAAa,2BAA4B,CACzC,gBAAkD,SAAhC,QAAQ,GAAG,CAAC,eAAe,AAAY,AAEjE,cAAc,CAEZ,IAAI,CAAC,WAAW,EAClB,CAEQ,aAAc,CAiBtB,CAEQ,SAAgB,CAEpB,MAAO,CACL,SAAU,EAAE,CACZ,eAAgB,EAAE,CAClB,QAAS,EAAE,CACX,cAAe,EAAE,CACjB,oBAAqB,EAAE,CACvB,SAAU,EAAE,CACZ,OAAQ,EAAE,CACV,QAAS,EAAE,CACX,iBAAkB,CAAC,CACrB,CAgBJ,CAEQ,QAAQ,CAAU,CAAE,CAI5B,CAGA,MAAM,WAAW,CAAc,CAA2B,CAExD,IAAM,EADO,AACG,IADC,CAAC,OAAO,GACJ,QAAQ,CAAC,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,IAAW,KAM5D,OAJI,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,kCAAmC,QAAE,EAAQ,QAAS,EAAU,QAAU,WAAY,GAG7F,CACT,CAEA,MAAM,cAAc,CAAc,CAAE,CAAiD,CAAoB,CACvG,IAAM,EAAc,IAAI,CAAC,OAAO,GAC1B,EAAgB,EAAY,QAAQ,CAAC,SAAS,CAAC,GAAK,EAAE,EAAE,GAAK,GAEnE,GAAsB,CAAC,GAAG,CAAtB,EACF,EAAY,QAAQ,CAAC,EAAc,CAAG,CACpC,GAAG,EAAY,QAAQ,CAAC,EAAc,CACtC,GAAG,CAAI,CACP,aAAc,IAAI,OAAO,WAAW,EACtC,MACK,CACL,IAAM,EAAsB,CAC1B,GAAI,EACJ,SAAU,EAAK,QAAQ,EAAI,GAC3B,aAAc,EAAK,YAAY,EAAI,GACnC,WAAY,EAAK,UAAU,CAC3B,KAAM,EAAK,IAAI,EAAI,UACnB,WAAY,IAAI,OAAO,WAAW,GAClC,aAAc,IAAI,OAAO,WAAW,GACpC,WAAW,CACb,EACA,EAAY,QAAQ,CAAC,IAAI,CAAC,EAC5B,CAQA,OANA,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,qCAAsC,QAAE,OAAQ,CAAK,GAG5D,EAAY,QAAQ,CAAC,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,EACjD,CAEA,MAAM,eAAe,CAAa,CAAsB,CACtD,IAAM,EAAO,IAAI,CAAC,OAAO,GACnB,EAAa,EAAM,WAAW,GAC9B,EAAU,EAAK,QAAQ,CAAC,MAAM,CAAC,GACnC,EAAE,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC,IAClC,EAAE,YAAY,CAAC,WAAW,GAAG,QAAQ,CAAC,IAOxC,OAJI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,sCAAuC,OAAE,EAAO,QAAS,EAAQ,MAAM,AAAC,GAG/E,CACT,CAGA,MAAM,oBAAoB,CAAmB,CAAE,CAAmB,CAA0B,CAC1F,IAAM,EAAc,IAAI,CAAC,OAAO,GAC1B,EAA4B,CAChC,GAAI,OAAO,UAAU,GACrB,aAAc,EACd,aAAc,EACd,OAAQ,UACR,WAAY,IAAI,OAAO,WAAW,GAClC,WAAY,IAAI,OAAO,WAAW,EACpC,EASA,OAPA,EAAY,cAAc,CAAC,IAAI,CAAC,GAChC,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,2CAA4C,aAAE,cAAa,EAAa,UAAW,EAAW,EAAG,AAAD,GAGvG,CACT,CAEA,MAAM,oBAAoB,CAAiB,CAAE,CAA6C,CAA0B,CAClH,IAAM,EAAc,IAAI,CAAC,OAAO,GAC1B,EAAQ,EAAY,cAAc,CAAC,SAAS,CAAC,GAAK,EAAE,EAAE,GAAK,GAEjE,GAAc,CAAC,IAAX,EAAc,CAKhB,GAJA,EAAY,cAAc,CAAC,EAAM,CAAC,MAAM,CAAG,EAC3C,EAAY,cAAc,CAAC,EAAM,CAAC,UAAU,CAAG,IAAI,OAAO,WAAW,GAGjE,AAAW,eAAY,CACzB,IAAM,EAAU,EAAY,cAAc,CAAC,EAAM,CAC3C,EAAuB,CAC3B,QAAS,EAAQ,YAAY,CAC7B,UAAW,EAAQ,YAAY,CAC/B,WAAY,IAAI,OAAO,WAAW,EACpC,EACM,EAAuB,CAC3B,QAAS,EAAQ,YAAY,CAC7B,UAAW,EAAQ,YAAY,CAC/B,WAAY,IAAI,OAAO,WAAW,EACpC,EACA,EAAY,OAAO,CAAC,IAAI,CAAC,EAAc,EACzC,CAQA,OANA,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,2CAA4C,WAAE,SAAW,CAAO,GAGvE,EAAY,cAAc,CAAC,EAAM,AAC1C,CAEA,MAAM,AAAI,MAAM,2BAClB,CAEA,MAAM,kBAAkB,CAAc,CAA4B,CAEhE,IAAM,EAAW,AADJ,IAAI,CAAC,OAAO,GACH,cAAc,CAAC,MAAM,CACzC,GAAK,EAAE,YAAY,GAAK,GAAU,EAAE,YAAY,GAAK,GAOvD,OAJI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,yCAA0C,CAAE,SAAQ,MAAO,EAAS,MAAM,AAAC,GAGlF,CACT,CAGA,MAAM,WAAW,CAAc,CAAqB,CAElD,IAAM,EADO,AACG,IADC,CAAC,OAAO,GACJ,OAAO,CAAC,MAAM,CAAC,GAAK,EAAE,OAAO,GAAK,GAMvD,OAJI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,kCAAmC,QAAE,EAAQ,MAAO,EAAQ,MAAM,AAAC,GAG1E,CACT,CAEA,MAAM,SAAS,CAAc,CAAE,CAAgB,CAAiB,CAC9D,IAAM,EAAc,IAAI,CAAC,OAAO,GAChC,EAAY,OAAO,CAAG,EAAY,OAAO,CAAC,MAAM,CAC9C,GAAK,AAAE,CAAD,CAAG,OAAO,GAAK,GAAU,EAAE,SAAS,GAAK,GACxC,EAAE,GAD8C,IACvC,CAAX,CAAC,CAAe,GAAY,EAAE,SAAS,GAAK,GAEnD,GAFyD,CAErD,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,gCAAiC,QAAE,WAAQ,CAAS,EAEpE,CAGA,MAAM,mBAAmB,CAAgB,CAAE,CAAiB,CAAE,CAAc,CAAE,CAAkB,CAAyB,CACvH,IAAM,EAAc,IAAI,CAAC,OAAO,GAC1B,EAAgC,CACpC,GAAI,OAAO,UAAU,GACrB,SAAU,EACV,MAAO,GAAU,GAAU,GAAX,eAA0B,CAAA,CAAS,CACnD,WAAY,EACZ,WAAY,IAAI,OAAO,WAAW,GAClC,WAAY,IAAI,OAAO,WAAW,EACpC,EAEA,EAAY,aAAa,CAAC,IAAI,CAAC,GAG/B,IAAM,EAAoC,CACxC,gBAAiB,EAAgB,EAAE,CACnC,QAAS,EACT,KAAM,QACN,UAAW,IAAI,OAAO,WAAW,EACnC,EAIA,GAHA,EAAY,mBAAmB,CAAC,IAAI,CAAC,GAGjC,GACF,IAAK,EADM,EACA,KAAU,EACnB,GAAI,GADwB,CACb,EAAW,CACxB,IAAM,EAA6B,CACjC,gBAAiB,EAAgB,EAAE,CACnC,QAAS,EACT,KAAM,SACN,UAAW,IAAI,OAAO,WAAW,EACnC,EACA,EAAY,mBAAmB,CAAC,IAAI,CAAC,EACvC,CACF,CASF,OANA,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,0CAA2C,CAAE,oBAAS,QAAW,UAAO,EAAS,eAAgB,EAAgB,EAAE,AAAC,GAG3H,CACT,CAEA,MAAM,iBAAiB,CAAc,CAA2B,CAC9D,IAAM,EAAO,IAAI,CAAC,OAAO,GACnB,EAAoB,EAAK,mBAAmB,CAC/C,MAAM,CAAC,GAAM,EAAG,OAAO,GAAK,GAC5B,GAAG,CAAC,GAAM,EAAG,eAAe,EAEzB,EAAgB,EAAK,aAAa,CAAC,MAAM,CAAC,GAC9C,EAAkB,QAAQ,CAAC,EAAE,EAAE,GAOjC,OAJI,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,wCAAyC,QAAE,EAAQ,MAAO,EAAc,MAAM,AAAC,GAGtF,CACT,CAEA,MAAM,gBAAgB,CAAsB,CAAgC,CAE1E,IAAM,EADO,AACQ,IADJ,CAAC,OAAO,GACC,aAAa,CAAC,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,IAAmB,KAM9E,OAJI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,uCAAwC,gBAAE,EAAgB,MAAO,CAAC,CAAC,CAAa,GAGvF,CACT,CAEA,MAAM,sBAAsB,CAAsB,CAAE,CAAc,CAAE,EAAqC,QAAQ,CAAiB,CAChI,IAAM,EAAc,IAAI,CAAC,OAAO,GAKhC,GAAI,CAJmB,AAIlB,EAJ8B,mBAAmB,CAAC,IAAI,CACzD,GAAM,EAAG,eAAe,GAAK,GAAkB,EAAG,OAAO,GAAK,GAG3C,CACnB,IAAM,EAA6B,CACjC,gBAAiB,EACjB,QAAS,OACT,EACA,UAAW,IAAI,OAAO,WAAW,EACnC,EACA,EAAY,mBAAmB,CAAC,IAAI,CAAC,GACrC,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,6CAA8C,gBAAE,SAAgB,OAAQ,CAAK,EAE7F,CACF,CAEA,MAAM,yBAAyB,CAAsB,CAAE,CAAc,CAAiB,CACpF,IAAM,EAAc,IAAI,CAAC,OAAO,GAChC,EAAY,mBAAmB,CAAG,EAAY,mBAAmB,CAAC,MAAM,CACtE,GAAQ,EAAF,AAAK,CAAJ,cAAmB,GAAK,GAAkB,EAAG,OAAO,GAAK,GAElE,GAFwE,CAEpE,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,gDAAiD,gBAAE,EAAgB,QAAO,EAE1F,CAEA,MAAM,mBAAmB,CAAsB,CAAE,CAAqE,CAAiB,CACrI,IAAM,EAAc,IAAI,CAAC,OAAO,GAC1B,EAAQ,EAAY,aAAa,CAAC,SAAS,CAAC,GAAK,EAAE,EAAE,GAAK,GAElD,CAAC,GAAG,CAAd,IACF,EAAY,aAAa,CAAC,EAAM,CAAG,CACjC,GAAG,EAAY,aAAa,CAAC,EAAM,CACnC,GAAG,CAAI,CACP,WAAY,IAAI,OAAO,WAAW,EACpC,EACA,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,0CAA2C,gBAAE,OAAgB,CAAK,GAGpF,CAGA,MAAM,cAAc,CAA2C,CAAoB,CACjF,IAAM,EAAc,IAAI,CAAC,OAAO,GAC1B,EAAsB,CAC1B,GAAG,CAAO,CACV,GAAI,OAAO,UAAU,GACrB,WAAY,IAAI,OAAO,WAAW,EACpC,EAQA,OAPA,EAAY,QAAQ,CAAC,IAAI,CAAC,GAC1B,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,qCAAsC,CAAE,eAAgB,EAAQ,eAAe,CAAE,SAAU,EAAQ,SAAS,CAAE,UAAW,EAAW,EAAE,AAAC,GAG9I,CACT,CAEA,MAAM,YAAY,CAAsB,CAAE,EAAiB,CAAC,CAAE,EAAgB,EAAE,CAAsB,CAEpG,IAAM,EADO,AACI,IADA,CAAC,OAAO,GACH,QAAQ,CAC3B,MAAM,CAAC,GAAK,EAAE,eAAe,GAAK,GAAkB,CAAC,EAAE,UAAU,EACjE,IAAI,CAAC,CAAC,EAAG,IAAM,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,GAAK,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,IAChF,KAAK,CAAC,EAAQ,EAAS,GAM1B,OAJI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,mCAAoC,gBAAE,SAAgB,QAAQ,EAAO,MAAO,EAAS,MAAM,AAAC,GAGnG,CACT,CAEA,MAAM,cAAc,CAAiB,CAAE,CAAY,CAAoB,CACrE,IAAM,EAAc,IAAI,CAAC,OAAO,GAC1B,EAAQ,EAAY,QAAQ,CAAC,SAAS,CAAC,GAAK,EAAE,EAAE,GAAK,GAE3D,GAAc,CAAC,GAAG,CAAd,EASF,OARA,EAAY,QAAQ,CAAC,EAAM,CAAC,IAAI,CAAG,EACnC,EAAY,QAAQ,CAAC,EAAM,CAAC,SAAS,CAAG,IAAI,OAAO,WAAW,GAC9D,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,qCAAsC,WAAE,EAAW,MAAK,GAG/D,EAAY,QAAQ,CAAC,EAAM,AAGpC,OAAM,AAAI,MAAM,oBAClB,CAEA,MAAM,cAAc,CAAiB,CAAiB,CACpD,IAAM,EAAc,IAAI,CAAC,OAAO,GAC1B,EAAQ,EAAY,QAAQ,CAAC,SAAS,CAAC,GAAK,EAAE,EAAE,GAAK,GAE7C,CAAC,GAAG,CAAd,IACF,EAAY,QAAQ,CAAC,EAAM,CAAC,UAAU,CAAG,IAAI,OAAO,WAAW,GAC/D,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,qCAAsC,WAAE,CAAU,GAGpE,CAGA,MAAM,UAAU,CAAiB,CAAE,CAAiB,CAAiB,CACnE,IAAM,EAAc,IAAI,CAAC,OAAO,GAKhC,GAAI,CAAC,AAJiB,EAAY,MAAM,CAAC,IAAI,CAC3C,GAAK,EAAE,UAAU,GAAK,GAAa,EAAE,UAAU,GAAK,GAGlC,CAClB,IAAM,EAAe,CACnB,WAAY,EACZ,WAAY,EACZ,WAAY,IAAI,OAAO,WAAW,EACpC,EACA,EAAY,MAAM,CAAC,IAAI,CAAC,GACxB,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,iCAAkC,WAAE,YAAW,CAAU,EAEzE,CACF,CAEA,MAAM,YAAY,CAAiB,CAAE,CAAiB,CAAiB,CACrE,IAAM,EAAc,IAAI,CAAC,OAAO,EAChC,GAAY,MAAM,CAAG,EAAY,MAAM,CAAC,MAAM,CAC5C,GAAO,CAAF,CAAC,AAAG,UAAU,GAAK,GAAa,EAAE,UAAU,GAAK,GAExD,IAAI,CAAC,CAF4D,MAErD,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,mCAAoC,WAAE,YAAW,CAAU,EAE3E,CAEA,MAAM,UAAU,CAAiB,CAAE,CAAiB,CAAoB,CAEtE,IAAM,EADO,AACK,IADD,CAAC,OAAO,GACF,MAAM,CAAC,IAAI,CAChC,GAAK,EAAE,UAAU,GAAK,GAAa,EAAE,UAAU,GAAK,GAOtD,OAJI,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,iCAAkC,WAAE,YAAW,YAAW,CAAU,GAG3E,CACT,CAGA,MAAM,WAAW,CAAkB,CAAE,CAAsB,CAAE,CAAc,CAAmB,CAC5F,IAAM,EAAc,IAAI,CAAC,OAAO,GAC1B,EAAoB,CACxB,GAAI,OAAO,UAAU,GACrB,YAAa,EACb,iBAAkB,SAClB,EACA,WAAY,IAAI,OAAO,WAAW,EACpC,EAQA,OAPA,EAAY,OAAO,CAAC,IAAI,CAAC,GACzB,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,kCAAmC,YAAE,iBAAY,SAAgB,CAAO,GAG/E,CACT,CAEA,MAAM,cAAc,CAAkB,CAAE,CAAiB,CAAE,CAAc,CAAmB,CAC1F,IAAM,EAAc,IAAI,CAAC,OAAO,GAC1B,EAAoB,CACxB,GAAI,OAAO,UAAU,GACrB,YAAa,EACb,WAAY,SACZ,EACA,WAAY,IAAI,OAAO,WAAW,EACpC,EAQA,OAPA,EAAY,OAAO,CAAC,IAAI,CAAC,GACzB,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,qCAAsC,YAAE,YAAY,SAAW,CAAO,GAG7E,CACT,CAGA,gBAAgB,CAAsB,CAAE,CAAc,CAAE,CAAiB,CAAQ,CAC3E,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,uCAAwC,CAAE,wBAAgB,WAAQ,CAAS,GAGzF,IAAM,EAAO,IAAI,CAAC,OAAO,GACnB,EAAM,KAAK,GAAG,GACd,EAAqB,EAAK,gBAAgB,CAAC,EAAe,EAAI,EAAE,CAEtE,GAAI,EAAU,CAEZ,IAAM,EAAgB,EAAmB,SAAS,CAAC,GAAK,EAAE,MAAM,GAAK,GACjE,GAAiB,EACnB,CADsB,AACJ,CAAC,EAAc,CAAC,SAAS,CAAG,EAE9C,EAAmB,IAAI,CAAC,QAAE,EAAQ,UAAW,CAAI,EAErD,KAAO,CAEL,IAAM,EAAgB,EAAmB,SAAS,CAAC,GAAK,EAAE,MAAM,GAAK,GACjE,GAAiB,GAAG,AACtB,EAAmB,MAAM,CAAC,EAAe,EAE7C,CAEA,EAAK,gBAAgB,CAAC,EAAe,CAAG,EACxC,IAAI,CAAC,OAAO,CAAC,EACf,CAEA,MAAM,eAAe,CAAsB,CAAqB,CAC9D,IAAM,EAAO,IAAI,CAAC,OAAO,GAEnB,EADM,AACW,KADN,GAAG,GACS,IAGvB,EAH6B,AAGd,CADM,EAAK,gBAAgB,CAAC,EAAe,EAAI,EAAA,AAAE,EAC9B,MAAM,CAAC,GAAK,EAAE,OAH4B,EAGnB,CAAG,GAGlE,EAAK,gBAAgB,CAAC,EAAe,CAAG,EACxC,IAAI,CAAC,OAAO,CAAC,GAEb,IAAM,EAAU,EAAa,GAAG,CAAC,GAAK,EAAE,MAAM,EAI9C,OAHI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,sCAAuC,gBAAE,UAAgB,CAAQ,GAExE,CACT,CAGA,MAAM,WAAW,CAAsB,CAAE,CAAc,CAAE,CAAkB,CAAiB,CAC1F,IAAM,EAAc,IAAI,CAAC,OAAO,GAC1B,EAAc,EAAY,mBAAmB,CAAC,SAAS,CAC3D,GAAM,EAAG,eAAe,GAAK,GAAkB,EAAG,OAAO,GAAK,GAG5C,CAAC,GAAG,CAApB,IACF,EAAY,mBAAmB,CAAC,EAAY,CAAC,YAAY,CAAG,EAC5D,IAAI,CAAC,OAAO,CAAC,GAET,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,kCAAmC,gBAAE,SAAgB,aAAQ,CAAW,GAG1F,CAEA,MAAM,eAAe,CAAsB,CAAE,CAAc,CAAmB,CAC5E,IAAM,EAAO,IAAI,CAAC,OAAO,GACnB,EAAS,EAAK,mBAAmB,CAAC,IAAI,CAC1C,GAAM,EAAG,eAAe,GAAK,GAAkB,EAAG,OAAO,GAAK,GAG1D,MAAwC,KAA3B,GAAQ,aAAwB,EAAT,AAAgB,YAAY,CAAa,GAAT,AAEpE,EAAc,EAF0D,AAErD,QAAQ,CAAC,MAAM,CACtC,GAAK,EAAE,eAAe,GAAK,GACtB,IAAI,KAAK,EAAE,UAAU,EAAI,GACzB,EAAE,SAAS,GAAK,GACrB,IAD4B,EACtB,CAKR,OAHI,IAAI,CAAC,eAAe,EAAE,AACxB,KAJiE,GAIzD,GAAG,CAAC,sCAAuC,gBAAE,SAAgB,cAAQ,CAAY,GAEpF,CACT,CACF,CCplBA,IAAA,EAAA,EAAA,CAAA,CAAA,MAEO,OAAM,EACH,QAAS,CACT,gBAAkB,AAAgC,iBAAxB,GAAG,CAAC,eAA2B,AAEjE,AAFqD,cAEvC,CAQZ,IAAI,CAAC,QAAQ,CAAG,CAAA,EAAA,EAAA,YAAA,AAAY,EAPtB,AAOuB,aAAa,8BANpC,mNAOR,CAGA,MAAM,WAAW,CAAc,CAA2B,CACxD,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,KAAM,GACT,MAAM,UAET,AAAI,GACE,IADK,AACD,CAAC,eAAe,EACtB,AADwB,QAChB,KAAK,CAAC,2CAA4C,GAErD,OAGL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,qCAAsC,QAAE,EAAQ,QAAS,EAAO,QAAU,WAAY,GAE7F,EACT,CAEA,MAAM,cAAc,CAAc,CAAE,CAAiD,CAAoB,CACvG,GAAM,CAAE,KAAM,CAAW,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACrD,IAAI,CAAC,YACL,MAAM,CAAC,CACN,GAAG,CAAI,CACP,aAAc,IAAI,OAAO,WAAW,EACtC,GACC,EAAE,CAAC,KAAM,GACT,MAAM,GACN,MAAM,GAET,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,8CAA+C,GAEzD,EAMR,OAHI,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,wCAAyC,QAAE,OAAQ,CAAK,GAE/D,CACT,CAEA,MAAM,eAAe,CAAa,CAAsB,CACtD,GAAM,CAAE,MAAI,CAAE,OAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,CAAC,gBAAgB,EAAE,EAAM,sBAAsB,EAAE,EAAM,CAAC,CAAC,SAE/D,AAAI,GACE,IADK,AACD,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,+CAAgD,GAEzD,EAAE,GAGP,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,yCAA0C,OAAE,EAAO,QAAS,GAAM,QAAU,CAAE,GAErF,EACT,CAGA,MAAM,oBAAoB,CAAmB,CAAE,CAAmB,CAA0B,CAC1F,IAAM,EAAa,CACjB,GAAI,OAAO,UAAU,GACrB,aAAc,EACd,aAAc,EACd,OAAQ,UACR,WAAY,IAAI,OAAO,WAAW,GAClC,WAAY,IAAI,OAAO,WAAW,EACpC,EAEM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,mBACL,MAAM,CAAC,CAAC,EAAW,EACnB,MAAM,GACN,MAAM,GAET,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,oDAAqD,GAE/D,EAMR,OAHI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,8CAA+C,aAAE,cAAa,EAAa,UAAW,EAAK,EAAE,AAAC,GAErG,CACT,CAEA,MAAM,oBAAoB,CAAiB,CAAE,CAA6C,CAA0B,CAClH,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,mBACL,MAAM,CAAC,QACN,EACA,WAAY,IAAI,OAAO,WAAW,EACpC,GACC,EAAE,CAAC,KAAM,GACT,MAAM,GACN,MAAM,GAET,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,oDAAqD,GAE/D,EAIR,GAAe,AAAX,gBAAyB,EAAM,CAEjC,IAAM,EAAe,CACnB,QAFc,AAEL,EAAQ,YAAY,CAC7B,UAAW,EAAQ,YAAY,CAC/B,WAAY,IAAI,OAAO,WAAW,EACpC,EACM,EAAe,CACnB,QAAS,EAAQ,YAAY,CAC7B,UAAW,EAAQ,YAAY,CAC/B,WAAY,IAAI,OAAO,WAAW,EACpC,CAEA,OAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,MAAM,CAAC,CAAC,EAAc,EAAa,CACzE,CAKA,OAHI,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,8CAA+C,WAAE,SAAW,CAAO,GAE1E,CACT,CAEA,MAAM,kBAAkB,CAAc,CAA4B,CAChE,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,mBACL,MAAM,CAAC,KACP,EAAE,CAAC,CAAC,gBAAgB,EAAE,EAAO,iBAAiB,EAAE,EAAA,CAAQ,SAE3D,AAAI,GACE,IADK,AACD,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,kDAAmD,GAE5D,EAAE,GAGP,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,4CAA6C,QAAE,EAAQ,MAAO,GAAM,QAAU,CAAE,GAEvF,EACT,CAGA,MAAM,WAAW,CAAc,CAAqB,CAClD,GAAM,CAAE,MAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAW,UAEjB,AAAI,GACE,IADK,AACD,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,2CAA4C,GAErD,EAAE,GAGP,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,qCAAsC,QAAE,EAAQ,MAAO,GAAM,QAAU,CAAE,GAEhF,EACT,CAEA,MAAM,SAAS,CAAc,CAAE,CAAgB,CAAiB,CAC9D,MAAM,IAAI,CAAC,QAAQ,CAChB,IAAI,CAAC,WACL,MAAM,GACN,EAAE,CAAC,CAAC,YAAY,EAAE,EAAO,cAAc,EAAE,EAAS,cAAc,EAAE,EAAS,cAAc,EAAE,EAAO,CAAC,CAAC,EAEnG,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,mCAAoC,QAAE,WAAQ,CAAS,EAEvE,CAGA,MAAM,mBAAmB,CAAgB,CAAE,CAAiB,CAAE,CAAc,CAAE,CAAkB,CAAyB,CACvH,IAAM,EAAkB,CACtB,GAAI,OAAO,UAAU,GACrB,SAAU,EACV,MAAO,IAAU,EAAU,GAAX,eAA0B,CAAA,CAAS,CACnD,WAAY,EACZ,WAAY,IAAI,OAAO,WAAW,GAClC,WAAY,IAAI,OAAO,WAAW,EACpC,EAEM,CAAE,MAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,iBACL,MAAM,CAAC,CAAC,EAAgB,EACxB,MAAM,GACN,MAAM,GAET,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,KAAK,CAAC,mDAAoD,GAE9D,EAcR,GAVA,MAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,wBAAwB,MAAM,CAAC,CACtD,CACE,gBAAiB,EAAK,EAAE,CACxB,QAAS,EACT,KAAM,QACN,UAAW,IAAI,OAAO,WAAW,EACnC,EACD,EAGG,EACF,IAAK,GADM,CACA,KAAU,EACf,IAAW,EADa,CAE1B,MAAM,EADkB,EACd,CAAC,QAAQ,CAAC,IAAI,CAAC,wBAAwB,MAAM,CAAC,CACtD,CACE,gBAAiB,EAAK,EAAE,CACxB,QAAS,EACT,KAAM,SACN,UAAW,IAAI,OAAO,WAAW,EACnC,EACD,EAQP,OAHI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,6CAA8C,SAAE,YAAS,QAAW,UAAO,EAAS,eAAgB,EAAK,EAAE,AAAC,GAEnH,CACT,CAEA,MAAM,iBAAiB,CAAc,CAA2B,CAC9D,GAAM,MAAE,CAAI,CAAE,OAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,wBACL,MAAM,CAAC,mBACP,EAAE,CAAC,UAAW,GAEjB,GAAI,EAIF,KAJS,EACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,iDAAkD,GAE3D,EAAE,CAGX,IAAM,EAAkB,EAAK,GAAG,CAAC,GAAM,EAAG,eAAe,EAEnD,CAAE,KAAM,CAAa,CAAE,MAAO,CAAS,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CAClE,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,KAAM,UAEZ,AAAI,GACE,IAAI,CAAC,GADI,YACW,EAAE,AACxB,QAAQ,KAAK,CAAC,wEAAyE,GAElF,EAAE,GAGP,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,2CAA4C,QAAE,EAAQ,MAAO,GAAe,QAAU,CAAE,GAE/F,EACT,CAEA,MAAM,gBAAgB,CAAsB,CAAgC,CAC1E,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,KAAM,GACT,MAAM,UAET,AAAI,GACE,IADK,AACD,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,gDAAiD,GAE1D,OAGL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,0CAA2C,gBAAE,EAAgB,MAAO,CAAC,CAAC,CAAK,GAElF,EACT,CAEA,MAAM,sBAAsB,CAAsB,CAAE,CAAc,CAAE,EAAqC,QAAQ,CAAiB,CAChI,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,IAAI,CAAC,wBACL,MAAM,CAAC,CACN,CACE,gBAAiB,EACjB,QAAS,OACT,EACA,UAAW,IAAI,OAAO,WAAW,EACnC,EACD,EAEH,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,sDAAuD,GAEjE,CAGJ,KAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,gDAAiD,gBAAE,SAAgB,OAAQ,CAAK,EAEhG,CAEA,MAAM,yBAAyB,CAAsB,CAAE,CAAc,CAAiB,CACpF,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,IAAI,CAAC,wBACL,MAAM,GACN,KAAK,CAAC,CAAE,gBAAiB,EAAgB,QAAS,CAAO,GAE5D,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,yDAA0D,GAEpE,CAGJ,KAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,mDAAoD,gBAAE,SAAgB,CAAO,EAE7F,CAEA,MAAM,mBAAmB,CAAsB,CAAE,CAAqE,CAAiB,CACrI,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,IAAI,CAAC,iBACL,MAAM,CAAC,CACN,GAAG,CAAI,CACP,WAAY,IAAI,OAAO,WAAW,EACpC,GACC,EAAE,CAAC,KAAM,GAEZ,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,mDAAoD,GAE9D,EAGJ,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,6CAA8C,gBAAE,OAAgB,CAAK,EAErF,CAGA,MAAM,cAAc,CAA2C,CAAoB,CACjF,IAAM,EAAa,CACjB,GAAG,CAAO,CACV,GAAI,OAAO,UAAU,GACrB,WAAY,IAAI,OAAO,WAAW,EACpC,EAEM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,YACL,MAAM,CAAC,CAAC,EAAW,EACnB,MAAM,GACN,MAAM,GAET,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,8CAA+C,GAEzD,EAMR,OAHI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,wCAAyC,CAAE,eAAgB,EAAQ,eAAe,CAAE,SAAU,EAAQ,SAAS,CAAE,UAAW,EAAK,EAAE,AAAC,GAE3I,CACT,CAEA,MAAM,YAAY,CAAsB,CAAE,EAAiB,CAAC,CAAE,EAAgB,EAAE,CAAsB,CACpG,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,kBAAmB,GACtB,EAAE,CAAC,aAAc,MACjB,KAAK,CAAC,aAAc,CAAE,WAAW,CAAK,GACtC,KAAK,CAAC,EAAQ,EAAS,EAAQ,UAElC,AAAI,GACE,IAAI,AADC,CACA,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,4CAA6C,GAEtD,EAAE,GAGP,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,sCAAuC,CAAE,iBAAgB,eAAQ,EAAO,MAAO,GAAM,QAAU,CAAE,GAExG,EACT,CAEA,MAAM,cAAc,CAAiB,CAAE,CAAY,CAAoB,CACrE,GAAM,MAAE,CAAI,CAAE,OAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,YACL,MAAM,CAAC,MACN,EACA,UAAW,IAAI,OAAO,WAAW,EACnC,GACC,EAAE,CAAC,KAAM,GACT,MAAM,GACN,MAAM,GAET,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,8CAA+C,GAEzD,EAMR,OAHI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,wCAAyC,WAAE,OAAW,CAAK,GAElE,CACT,CAEA,MAAM,cAAc,CAAiB,CAAiB,CACpD,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,IAAI,CAAC,YACL,MAAM,CAAC,CAAE,WAAY,IAAI,OAAO,WAAW,EAAG,GAC9C,EAAE,CAAC,KAAM,GAEZ,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,8CAA+C,GAEzD,EAGJ,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,wCAAyC,WAAE,CAAU,EAErE,CAGA,MAAM,UAAU,CAAiB,CAAE,CAAiB,CAAiB,CACnE,IAAM,EAAQ,CACZ,WAAY,EACZ,WAAY,EACZ,WAAY,IAAI,OAAO,WAAW,EACpC,EAEM,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,IAAI,CAAC,UACL,MAAM,CAAC,CAAC,EAAM,EAEjB,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,0CAA2C,GAErD,EAGJ,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,oCAAqC,WAAE,YAAW,CAAU,EAE5E,CAEA,MAAM,YAAY,CAAiB,CAAE,CAAiB,CAAiB,CACrE,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,IAAI,CAAC,UACL,MAAM,GACN,KAAK,CAAC,CAAE,WAAY,EAAW,WAAY,CAAU,GAExD,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,4CAA6C,GAEvD,EAGJ,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,sCAAuC,WAAE,YAAW,CAAU,EAE9E,CAEA,MAAM,UAAU,CAAiB,CAAE,CAAiB,CAAoB,CACtE,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,UACL,MAAM,CAAC,MACP,KAAK,CAAC,CAAE,WAAY,EAAW,WAAY,CAAU,GACrD,MAAM,GAET,GAAI,GAAwB,YAAY,CAA3B,EAAM,IAAI,CAIrB,OAHI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,0CAA2C,IAEpD,EAGT,IAAM,EAAY,CAAC,CAAC,EAIpB,OAHI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,oCAAqC,WAAE,YAAW,YAAW,CAAU,GAE9E,CACT,CAGA,MAAM,WAAW,CAAkB,CAAE,CAAsB,CAAE,CAAc,CAAmB,CAC5F,IAAM,EAAY,CAChB,GAAI,OAAO,UAAU,GACrB,YAAa,EACb,iBAAkB,SAClB,EACA,WAAY,IAAI,OAAO,WAAW,EACpC,EAEM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,WACL,MAAM,CAAC,CAAC,EAAU,EAClB,MAAM,GACN,MAAM,GAET,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,2CAA4C,GAEtD,EAMR,OAHI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,qCAAsC,YAAE,iBAAY,SAAgB,CAAO,GAElF,CACT,CAEA,MAAM,cAAc,CAAkB,CAAE,CAAiB,CAAE,CAAc,CAAmB,CAC1F,IAAM,EAAY,CAChB,GAAI,OAAO,UAAU,GACrB,YAAa,EACb,WAAY,SACZ,EACA,WAAY,IAAI,OAAO,WAAW,EACpC,EAEM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,WACL,MAAM,CAAC,CAAC,EAAU,EAClB,MAAM,GACN,MAAM,GAET,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,8CAA+C,GAEzD,EAMR,OAHI,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,wCAAyC,YAAE,YAAY,SAAW,CAAO,GAEhF,CACT,CAGA,gBAAgB,CAAsB,CAAE,CAAc,CAAE,CAAiB,CAAQ,CAE3E,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,0CAA2C,gBAAE,SAAgB,WAAQ,CAAS,EAE9F,CAEA,MAAM,eAAe,CAAsB,CAAqB,CAK9D,OAHI,IAAI,CAAC,eAAe,EACtB,AADwB,QAChB,GAAG,CAAC,yCAA0C,gBAAE,CAAe,GAElE,EAAE,AACX,CAGA,MAAM,WAAW,CAAsB,CAAE,CAAc,CAAE,CAAkB,CAAiB,CAC1F,GAAM,CAAE,OAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,IAAI,CAAC,wBACL,MAAM,CAAC,CAAE,aAAc,CAAW,GAClC,KAAK,CAAC,CAAE,gBAAiB,EAAgB,QAAS,CAAO,GAE5D,GAAI,EAIF,KAJS,CACL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,2CAA4C,GAEtD,EAGJ,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,qCAAsC,gBAAE,SAAgB,aAAQ,CAAW,EAE3F,CAEA,MAAM,eAAe,CAAsB,CAAE,CAAc,CAAmB,CAE5E,GAAM,CAAE,KAAM,CAAM,CAAE,MAAO,CAAW,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CAC7D,IAAI,CAAC,wBACL,MAAM,CAAC,gBACP,KAAK,CAAC,CAAE,gBAAiB,EAAgB,QAAS,CAAO,GACzD,MAAM,GAET,GAAI,EAIF,OAHI,IADW,AACP,CAAC,eAAe,EAAE,AACxB,QAAQ,KAAK,CAAC,8DAA+D,GAExE,EAGT,IAAM,MAAwC,KAA3B,GAAQ,aAAwB,EAAO,AAAhB,YAA4B,CAAa,GAAT,AAGpE,IAHwE,GAGtE,CAAK,CAAE,MAAO,CAAU,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACrD,IAAI,CAAC,YACL,MAAM,CAAC,IAAK,CAAE,MAAO,QAAS,MAAM,CAAK,GACzC,EAAE,CAAC,kBAAmB,GACtB,EAAE,CAAC,aAAc,EAAW,WAAW,IACvC,GAAG,CAAC,YAAa,GACjB,EAAE,CAAC,EADsB,WACR,aAEpB,AAAI,GACE,IAAI,CAAC,IADK,CAHiD,UAIvC,EAAE,AACxB,QAAQ,KAAK,CAAC,6DAA8D,GAEvE,IAGL,IAAI,CAAC,eAAe,EAAE,AACxB,QAAQ,GAAG,CAAC,yCAA0C,gBAAE,SAAgB,EAAQ,YAAa,CAAM,GAE9F,GAAS,EAClB,CACF,CC3oBA,IAAI,EAAiC,KAExB,EAAiB,UAC5B,GAAI,EACF,OAAO,EAGT,CAJgB,GAIV,EAAkD,SAAhC,QAAQ,GAAG,CAAC,eAAe,CAMjD,GAAI,CAEF,GAAI,CADa,MAAM,MAAM,GAAG,YAAY,eAAe,4BAAC,EAC/C,EAAE,CAKb,CALe,MACX,AAIG,GAHL,QAAQ,GAAG,CAAC,EADO,sCAGrB,EAAa,IAAI,CAGrB,CAAE,MAAO,EAAO,CACV,GACF,QAAQ,GAAG,CAAC,EADO,0DAGvB,CAOF,OAJI,AAIG,GAHL,QAAQ,GAAG,CAAC,EADO,mCAGrB,EAAa,IAAI,CAEnB"}